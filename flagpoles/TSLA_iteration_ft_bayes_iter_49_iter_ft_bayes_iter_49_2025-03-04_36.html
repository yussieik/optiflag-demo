<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flagpole Analysis - TSLA - cut-TSLA, 2025-03-04 | Professional Trading Analytics</title>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&family=JetBrains+Mono:wght@400;500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="../assets/styles.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../index.html">Home</a> /
            <a href="../experiments/TSLA_bayes_iter_49.html">
                TSLA - bayes_iter_49
            </a> /
            <span>Flagpole Details</span>
        </nav>

        
        <nav class="flagpole-navigation">
            <div class="nav-container">
                <a href="TSLA_iteration_ft_bayes_iter_49_iter_ft_bayes_iter_49_2025-02-12_54.html" class="nav-btn prev-btn">← Previous</a>
                <span class="nav-info">
                    Flagpole 420 of 426
                </span>
                <a href="TSLA_iteration_ft_bayes_iter_49_iter_ft_bayes_iter_49_2025-03-07_112.html" class="nav-btn next-btn">Next →</a>
            </div>
            <div class="nav-experiment-link">
                <a href="../experiments/TSLA_bayes_iter_49.html" class="nav-btn experiment-btn">
                    ← Back to TSLA - bayes_iter_49
                </a>
            </div>
        </nav>
        

        <header>
            <h1>Professional Flagpole Pattern Analysis</h1>
            <div class="flagpole-header-info">
                <span class="ticker">TSLA</span>
                <span class="timestamp">cut-TSLA, 2025-03-04</span>
            </div>
        </header>

        <div class="flagpole-content">
            <div class="section">
                <h2>Price Chart</h2>
                <div id="chart" style="height: 660px; background: #0B1426; border: 2px solid #00D4A3; padding: 10px; box-sizing: border-box; overflow: visible; border-radius: 8px; box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);"></div>
            </div>
            
            
<script>
// Chart initialization for flagpole visualization
(function() {
    'use strict';
    
    // Configuration
    const chartOptions = {"height": 640, "layout": {"backgroundColor": "#0B1426", "textColor": "#F8FAFC", "fontSize": 14, "fontFamily": "'JetBrains Mono', 'SF Mono', 'Monaco', 'Consolas', monospace"}, "grid": {"vertLines": {"color": "#2D3748", "style": 0, "visible": true}, "horzLines": {"color": "#2D3748", "style": 0, "visible": true}}, "timeScale": {"visible": true, "borderVisible": true, "borderColor": "#334155", "timeVisible": true, "secondsVisible": false, "tickMarkColor": "#F8FAFC", "rightBarStaysOnScroll": true, "fixLeftEdge": false, "fixRightEdge": false, "ticksVisible": true, "minBarSpacing": 1.0, "barSpacing": 8, "height": 40}, "rightPriceScale": {"visible": true, "borderVisible": true, "borderColor": "#334155", "ticksVisible": true, "scaleMargins": {"top": 0.1, "bottom": 0.2}}, "crosshair": {"mode": 0, "vertLine": {"visible": true, "labelVisible": true}, "horzLine": {"visible": true, "labelVisible": true}}, "localization": {"locale": "en-US", "dateFormat": "yyyy-MM-dd"}};
    const candlestickData = [{"time": "2025-03-04 15:29:00", "open": 265.28, "high": 266.07, "low": 264.9601, "close": 265.61, "volume": 341705.0}, {"time": "2025-03-04 15:30:00", "open": 265.57, "high": 266.2199, "low": 264.15, "close": 265.93, "volume": 398905.0}, {"time": "2025-03-04 15:31:00", "open": 265.96, "high": 267.3, "low": 265.9076, "close": 266.765, "volume": 472934.0}, {"time": "2025-03-04 15:32:00", "open": 266.765, "high": 267.27, "low": 266.36, "close": 267.01, "volume": 323963.0}, {"time": "2025-03-04 15:33:00", "open": 267.04, "high": 267.21, "low": 266.36, "close": 266.91, "volume": 259351.0}, {"time": "2025-03-04 15:34:00", "open": 266.8, "high": 267.0637, "low": 265.96, "close": 266.0519, "volume": 262984.0}, {"time": "2025-03-04 15:35:00", "open": 266.05, "high": 266.66, "low": 265.6141, "close": 266.22, "volume": 227491.0}, {"time": "2025-03-04 15:36:00", "open": 266.16, "high": 266.25, "low": 265.25, "close": 265.67, "volume": 291114.0}, {"time": "2025-03-04 15:37:00", "open": 265.69, "high": 265.9, "low": 265.02, "close": 265.33, "volume": 262670.0}, {"time": "2025-03-04 15:38:00", "open": 265.31, "high": 265.6832, "low": 264.5301, "close": 265.35, "volume": 300681.0}, {"time": "2025-03-04 15:39:00", "open": 265.29, "high": 265.38, "low": 263.87, "close": 264.5073, "volume": 317815.0}, {"time": "2025-03-04 15:40:00", "open": 264.44, "high": 264.5258, "low": 263.68, "close": 263.94, "volume": 268837.0}, {"time": "2025-03-04 15:41:00", "open": 263.9361, "high": 266.372, "low": 263.75, "close": 266.1625, "volume": 394096.0}, {"time": "2025-03-04 15:42:00", "open": 266.1607, "high": 266.24, "low": 265.09, "close": 265.69, "volume": 225990.0}, {"time": "2025-03-04 15:43:00", "open": 265.71, "high": 265.84, "low": 264.96, "close": 265.4431, "volume": 183473.0}, {"time": "2025-03-04 15:44:00", "open": 265.45, "high": 266.93, "low": 265.35, "close": 266.86, "volume": 314930.0}, {"time": "2025-03-04 15:45:00", "open": 266.84, "high": 267.8156, "low": 266.0, "close": 267.3201, "volume": 372741.0}, {"time": "2025-03-04 15:46:00", "open": 267.395, "high": 267.395, "low": 265.34, "close": 266.0399, "volume": 342689.0}, {"time": "2025-03-04 15:47:00", "open": 265.8644, "high": 266.6, "low": 265.47, "close": 266.2486, "volume": 201679.0}, {"time": "2025-03-04 15:48:00", "open": 266.1, "high": 267.5, "low": 266.0975, "close": 267.246, "volume": 283200.0}, {"time": "2025-03-04 15:49:00", "open": 267.115, "high": 267.69, "low": 266.5, "close": 267.225, "volume": 233349.0}, {"time": "2025-03-04 15:50:00", "open": 267.2917, "high": 267.58, "low": 266.5, "close": 266.67, "volume": 201696.0}, {"time": "2025-03-04 15:51:00", "open": 266.7, "high": 267.4, "low": 266.2, "close": 266.7224, "volume": 231793.0}, {"time": "2025-03-04 15:52:00", "open": 266.8176, "high": 267.42, "low": 266.5501, "close": 267.3836, "volume": 177300.0}, {"time": "2025-03-04 15:53:00", "open": 267.28, "high": 267.5, "low": 265.4515, "close": 265.9509, "volume": 237156.0}, {"time": "2025-03-04 15:54:00", "open": 265.97, "high": 266.6309, "low": 265.03, "close": 265.26, "volume": 277330.0}, {"time": "2025-03-04 15:55:00", "open": 265.27, "high": 265.4, "low": 264.44, "close": 265.01, "volume": 328395.0}, {"time": "2025-03-04 15:56:00", "open": 264.94, "high": 265.58, "low": 264.75, "close": 265.06, "volume": 221571.0}, {"time": "2025-03-04 15:57:00", "open": 265.06, "high": 265.5, "low": 264.81, "close": 265.1251, "volume": 159694.0}, {"time": "2025-03-04 15:58:00", "open": 265.05, "high": 265.52, "low": 264.73, "close": 265.3, "volume": 242484.0}, {"time": "2025-03-04 15:59:00", "open": 265.3, "high": 266.1821, "low": 265.11, "close": 265.79, "volume": 238762.0}, {"time": "2025-03-04 16:00:00", "open": 265.83, "high": 266.6939, "low": 265.0106, "close": 266.5, "volume": 299416.0}, {"time": "2025-03-04 16:01:00", "open": 266.55, "high": 266.6121, "low": 265.2, "close": 265.395, "volume": 179210.0}, {"time": "2025-03-04 16:02:00", "open": 265.395, "high": 265.7, "low": 264.55, "close": 265.4, "volume": 208737.0}, {"time": "2025-03-04 16:03:00", "open": 265.235, "high": 266.25, "low": 265.19, "close": 266.1092, "volume": 187130.0}, {"time": "2025-03-04 16:04:00", "open": 266.11, "high": 266.3299, "low": 265.43, "close": 265.8737, "volume": 164274.0}, {"time": "2025-03-04 16:05:00", "open": 265.77, "high": 266.3957, "low": 265.58, "close": 266.19, "volume": 195916.0}, {"time": "2025-03-04 16:06:00", "open": 266.15, "high": 266.3264, "low": 265.2, "close": 265.34, "volume": 230391.0}, {"time": "2025-03-04 16:07:00", "open": 265.31, "high": 265.5546, "low": 264.3016, "close": 264.515, "volume": 256804.0}, {"time": "2025-03-04 16:08:00", "open": 264.49, "high": 264.5945, "low": 262.751, "close": 262.9599, "volume": 465476.0}, {"time": "2025-03-04 16:09:00", "open": 262.9599, "high": 263.41, "low": 262.82, "close": 263.295, "volume": 226250.0}, {"time": "2025-03-04 16:10:00", "open": 263.4, "high": 263.88, "low": 262.5101, "close": 263.0511, "volume": 286805.0}, {"time": "2025-03-04 16:11:00", "open": 263.11, "high": 264.41, "low": 262.91, "close": 264.16, "volume": 268028.0}, {"time": "2025-03-04 16:12:00", "open": 264.175, "high": 264.7499, "low": 263.64, "close": 264.56, "volume": 236160.0}, {"time": "2025-03-04 16:13:00", "open": 264.645, "high": 265.0, "low": 264.52, "close": 264.84, "volume": 195662.0}, {"time": "2025-03-04 16:14:00", "open": 264.835, "high": 265.8784, "low": 264.63, "close": 265.7976, "volume": 269156.0}, {"time": "2025-03-04 16:15:00", "open": 265.63, "high": 266.6, "low": 265.39, "close": 266.155, "volume": 251684.0}, {"time": "2025-03-04 16:16:00", "open": 266.155, "high": 266.5499, "low": 265.53, "close": 265.85, "volume": 190204.0}, {"time": "2025-03-04 16:17:00", "open": 265.735, "high": 265.7999, "low": 265.2, "close": 265.4001, "volume": 154287.0}, {"time": "2025-03-04 16:18:00", "open": 265.53, "high": 265.6399, "low": 264.8547, "close": 264.98, "volume": 151619.0}, {"time": "2025-03-04 16:19:00", "open": 264.87, "high": 264.97, "low": 264.0999, "close": 264.395, "volume": 182107.0}, {"time": "2025-03-04 16:20:00", "open": 264.5, "high": 265.4721, "low": 264.32, "close": 264.99, "volume": 260599.0}, {"time": "2025-03-04 16:21:00", "open": 264.905, "high": 265.39, "low": 264.7, "close": 265.19, "volume": 105539.0}, {"time": "2025-03-04 16:22:00", "open": 265.18, "high": 266.06, "low": 265.03, "close": 265.77, "volume": 173188.0}, {"time": "2025-03-04 16:23:00", "open": 265.77, "high": 265.9892, "low": 264.38, "close": 264.6758, "volume": 158074.0}, {"time": "2025-03-04 16:24:00", "open": 264.6, "high": 264.99, "low": 264.22, "close": 264.63, "volume": 169845.0}, {"time": "2025-03-04 16:25:00", "open": 264.5072, "high": 264.6422, "low": 263.59, "close": 264.03, "volume": 265149.0}, {"time": "2025-03-04 16:26:00", "open": 264.035, "high": 264.19, "low": 263.52, "close": 263.8808, "volume": 214611.0}, {"time": "2025-03-04 16:27:00", "open": 263.8999, "high": 263.99, "low": 263.16, "close": 263.73, "volume": 189301.0}, {"time": "2025-03-04 16:28:00", "open": 263.73, "high": 263.98, "low": 263.121, "close": 263.121, "volume": 175497.0}, {"time": "2025-03-04 16:29:00", "open": 263.16, "high": 263.16, "low": 262.0752, "close": 262.7605, "volume": 384767.0}, {"time": "2025-03-04 16:30:00", "open": 262.68, "high": 264.94, "low": 262.6118, "close": 264.34, "volume": 402323.0}, {"time": "2025-03-04 16:31:00", "open": 264.32, "high": 264.66, "low": 263.86, "close": 263.885, "volume": 132907.0}, {"time": "2025-03-04 16:32:00", "open": 263.885, "high": 264.64, "low": 263.54, "close": 264.29, "volume": 213261.0}, {"time": "2025-03-04 16:33:00", "open": 264.3825, "high": 264.7, "low": 264.05, "close": 264.34, "volume": 118271.0}, {"time": "2025-03-04 16:34:00", "open": 264.33, "high": 264.78, "low": 264.1272, "close": 264.425, "volume": 135953.0}, {"time": "2025-03-04 16:35:00", "open": 264.4685, "high": 265.36, "low": 264.1955, "close": 265.285, "volume": 211285.0}, {"time": "2025-03-04 16:36:00", "open": 265.21, "high": 266.6426, "low": 265.21, "close": 266.03, "volume": 352416.0}, {"time": "2025-03-04 16:37:00", "open": 265.905, "high": 266.39, "low": 265.72, "close": 266.3, "volume": 172204.0}, {"time": "2025-03-04 16:38:00", "open": 266.23, "high": 266.53, "low": 265.34, "close": 265.8597, "volume": 279301.0}, {"time": "2025-03-04 16:39:00", "open": 265.9, "high": 266.3861, "low": 265.58, "close": 266.27, "volume": 145331.0}, {"time": "2025-03-04 16:40:00", "open": 266.33, "high": 267.98, "low": 266.06, "close": 267.26, "volume": 395995.0}, {"time": "2025-03-04 16:41:00", "open": 267.255, "high": 267.53, "low": 266.5, "close": 266.81, "volume": 227524.0}, {"time": "2025-03-04 16:42:00", "open": 266.81, "high": 267.88, "low": 266.74, "close": 267.81, "volume": 193631.0}, {"time": "2025-03-04 16:43:00", "open": 267.7938, "high": 268.62, "low": 267.51, "close": 268.19, "volume": 427735.0}, {"time": "2025-03-04 16:44:00", "open": 268.2, "high": 268.4532, "low": 267.67, "close": 268.0, "volume": 248381.0}, {"time": "2025-03-04 16:45:00", "open": 268.0, "high": 268.22, "low": 267.81, "close": 268.16, "volume": 162113.0}, {"time": "2025-03-04 16:46:00", "open": 268.2, "high": 268.46, "low": 267.68, "close": 268.025, "volume": 220317.0}, {"time": "2025-03-04 16:47:00", "open": 268.0, "high": 268.29, "low": 267.65, "close": 267.78, "volume": 164565.0}, {"time": "2025-03-04 16:48:00", "open": 267.815, "high": 268.22, "low": 266.87, "close": 267.2, "volume": 245954.0}, {"time": "2025-03-04 16:49:00", "open": 267.2, "high": 268.72, "low": 266.9, "close": 268.434, "volume": 278798.0}, {"time": "2025-03-04 16:50:00", "open": 268.48, "high": 268.75, "low": 267.77, "close": 268.3499, "volume": 233652.0}, {"time": "2025-03-04 16:51:00", "open": 268.28, "high": 268.32, "low": 267.18, "close": 267.5518, "volume": 207612.0}, {"time": "2025-03-04 16:52:00", "open": 267.55, "high": 268.42, "low": 267.45, "close": 268.22, "volume": 140046.0}, {"time": "2025-03-04 16:53:00", "open": 268.225, "high": 269.76, "low": 268.225, "close": 269.6218, "volume": 413124.0}, {"time": "2025-03-04 16:54:00", "open": 269.6, "high": 269.63, "low": 268.68, "close": 268.918167, "volume": 275891.0}, {"time": "2025-03-04 16:55:00", "open": 268.82, "high": 269.18, "low": 268.31, "close": 268.88, "volume": 189111.0}, {"time": "2025-03-04 16:56:00", "open": 268.885, "high": 269.45, "low": 268.69, "close": 269.3402, "volume": 176395.0}, {"time": "2025-03-04 16:57:00", "open": 269.4, "high": 269.47, "low": 268.85, "close": 268.96, "volume": 146755.0}, {"time": "2025-03-04 16:58:00", "open": 268.96, "high": 269.76, "low": 268.82, "close": 269.2621, "volume": 213354.0}, {"time": "2025-03-04 16:59:00", "open": 269.24, "high": 269.26, "low": 268.0, "close": 268.23, "volume": 306819.0}, {"time": "2025-03-04 17:00:00", "open": 268.186, "high": 268.94, "low": 267.59, "close": 267.968, "volume": 221346.0}, {"time": "2025-03-04 17:01:00", "open": 267.955, "high": 268.115, "low": 267.36, "close": 267.5838, "volume": 191113.0}, {"time": "2025-03-04 17:02:00", "open": 267.51, "high": 267.9785, "low": 267.33, "close": 267.5702, "volume": 119703.0}, {"time": "2025-03-04 17:03:00", "open": 267.46, "high": 267.73, "low": 267.2001, "close": 267.6525, "volume": 134034.0}, {"time": "2025-03-04 17:04:00", "open": 267.65, "high": 268.6878, "low": 267.65, "close": 268.24, "volume": 194878.0}, {"time": "2025-03-04 17:05:00", "open": 268.13, "high": 268.43, "low": 267.762, "close": 268.18, "volume": 153187.0}, {"time": "2025-03-04 17:06:00", "open": 268.1612, "high": 268.21, "low": 267.6, "close": 268.0, "volume": 148605.0}, {"time": "2025-03-04 17:07:00", "open": 267.9799, "high": 268.04, "low": 266.9, "close": 267.0, "volume": 201712.0}, {"time": "2025-03-04 17:08:00", "open": 267.0, "high": 267.52, "low": 266.65, "close": 267.46, "volume": 188287.0}, {"time": "2025-03-04 17:09:00", "open": 267.425, "high": 267.82, "low": 267.0001, "close": 267.29, "volume": 129599.0}, {"time": "2025-03-04 17:10:00", "open": 267.0876, "high": 268.13, "low": 267.01, "close": 267.97, "volume": 168122.0}, {"time": "2025-03-04 17:11:00", "open": 268.02, "high": 269.1364, "low": 267.93, "close": 269.085, "volume": 220373.0}, {"time": "2025-03-04 17:12:00", "open": 269.08, "high": 269.1699, "low": 268.68, "close": 269.0368, "volume": 197278.0}, {"time": "2025-03-04 17:13:00", "open": 268.84, "high": 269.3009, "low": 268.2701, "close": 268.52, "volume": 199697.0}, {"time": "2025-03-04 17:14:00", "open": 268.52, "high": 268.7399, "low": 268.03, "close": 268.6, "volume": 158307.0}, {"time": "2025-03-04 17:15:00", "open": 268.51, "high": 268.9594, "low": 268.03, "close": 268.95, "volume": 187359.0}, {"time": "2025-03-04 17:16:00", "open": 268.9258, "high": 269.15, "low": 268.665, "close": 268.89, "volume": 142119.0}, {"time": "2025-03-04 17:17:00", "open": 268.904, "high": 269.1399, "low": 268.28, "close": 268.75, "volume": 140621.0}, {"time": "2025-03-04 17:18:00", "open": 268.74, "high": 268.9343, "low": 268.51, "close": 268.615, "volume": 98870.0}, {"time": "2025-03-04 17:19:00", "open": 268.55, "high": 268.6408, "low": 267.8401, "close": 268.0, "volume": 191813.0}, {"time": "2025-03-04 17:20:00", "open": 268.02, "high": 268.99, "low": 267.79, "close": 268.745, "volume": 158356.0}, {"time": "2025-03-04 17:21:00", "open": 268.7792, "high": 269.99, "low": 268.7475, "close": 269.93, "volume": 295234.0}, {"time": "2025-03-04 17:22:00", "open": 269.93, "high": 270.6999, "low": 269.87, "close": 270.35, "volume": 417605.0}, {"time": "2025-03-04 17:23:00", "open": 270.47, "high": 270.8828, "low": 269.97, "close": 270.4483, "volume": 246325.0}, {"time": "2025-03-04 17:24:00", "open": 270.3725, "high": 270.6799, "low": 269.761, "close": 270.3436, "volume": 220033.0}, {"time": "2025-03-04 17:25:00", "open": 270.315, "high": 270.95, "low": 270.18, "close": 270.9356, "volume": 234519.0}, {"time": "2025-03-04 17:26:00", "open": 270.9045, "high": 271.4, "low": 270.87, "close": 271.08, "volume": 335720.0}, {"time": "2025-03-04 17:27:00", "open": 271.03, "high": 271.89, "low": 270.97, "close": 271.84, "volume": 269253.0}, {"time": "2025-03-04 17:28:00", "open": 271.84, "high": 273.07, "low": 271.61, "close": 272.63, "volume": 533424.0}, {"time": "2025-03-04 17:29:00", "open": 272.63, "high": 272.7699, "low": 271.52, "close": 271.9891, "volume": 270104.0}, {"time": "2025-03-04 17:30:00", "open": 271.91, "high": 271.91, "low": 270.9, "close": 270.91, "volume": 335493.0}, {"time": "2025-03-04 17:31:00", "open": 270.91, "high": 271.13, "low": 270.1201, "close": 270.47, "volume": 265897.0}, {"time": "2025-03-04 17:32:00", "open": 270.5, "high": 270.88, "low": 270.21, "close": 270.3001, "volume": 215244.0}, {"time": "2025-03-04 17:33:00", "open": 270.362, "high": 270.45, "low": 268.66, "close": 269.655, "volume": 394661.0}, {"time": "2025-03-04 17:34:00", "open": 269.73, "high": 270.3599, "low": 269.3401, "close": 270.0899, "volume": 198994.0}, {"time": "2025-03-04 17:35:00", "open": 269.97, "high": 270.1542, "low": 269.56, "close": 270.03, "volume": 146500.0}, {"time": "2025-03-04 17:36:00", "open": 269.97, "high": 271.7999, "low": 269.97, "close": 271.145, "volume": 249702.0}, {"time": "2025-03-04 17:37:00", "open": 271.08, "high": 271.8699, "low": 271.0201, "close": 271.635, "volume": 193852.0}, {"time": "2025-03-04 17:38:00", "open": 271.7346, "high": 272.51, "low": 271.53, "close": 272.187, "volume": 209519.0}, {"time": "2025-03-04 17:39:00", "open": 272.175, "high": 272.175, "low": 271.4101, "close": 271.74, "volume": 145054.0}, {"time": "2025-03-04 17:40:00", "open": 271.735, "high": 272.1499, "low": 270.6001, "close": 271.0949, "volume": 190212.0}, {"time": "2025-03-04 17:41:00", "open": 271.0965, "high": 271.7, "low": 270.02, "close": 270.575, "volume": 270058.0}, {"time": "2025-03-04 17:42:00", "open": 270.64, "high": 270.8699, "low": 269.85, "close": 270.1101, "volume": 188196.0}, {"time": "2025-03-04 17:43:00", "open": 270.2208, "high": 270.9699, "low": 270.05, "close": 270.855, "volume": 139501.0}, {"time": "2025-03-04 17:44:00", "open": 270.89, "high": 271.4, "low": 270.6, "close": 271.03, "volume": 113891.0}, {"time": "2025-03-04 17:45:00", "open": 271.09, "high": 271.94, "low": 270.79, "close": 271.76, "volume": 165273.0}, {"time": "2025-03-04 17:46:00", "open": 271.5701, "high": 272.38, "low": 271.41, "close": 272.28, "volume": 187598.0}, {"time": "2025-03-04 17:47:00", "open": 272.3489, "high": 272.41, "low": 271.71, "close": 271.91, "volume": 122041.0}, {"time": "2025-03-04 17:48:00", "open": 271.915, "high": 272.9801, "low": 271.85, "close": 271.945, "volume": 223764.0}, {"time": "2025-03-04 17:49:00", "open": 271.84, "high": 271.9, "low": 271.16, "close": 271.565, "volume": 170182.0}, {"time": "2025-03-04 17:50:00", "open": 271.61, "high": 271.61, "low": 270.84, "close": 271.0899, "volume": 149697.0}, {"time": "2025-03-04 17:51:00", "open": 271.1, "high": 271.5965, "low": 270.88, "close": 271.1455, "volume": 113596.0}, {"time": "2025-03-04 17:52:00", "open": 271.15, "high": 271.15, "low": 270.1, "close": 270.35, "volume": 166615.0}, {"time": "2025-03-04 17:53:00", "open": 270.31, "high": 271.56, "low": 270.1773, "close": 271.495, "volume": 156486.0}, {"time": "2025-03-04 17:54:00", "open": 271.495, "high": 272.4, "low": 271.4301, "close": 271.7401, "volume": 158444.0}, {"time": "2025-03-04 17:55:00", "open": 271.9008, "high": 272.0, "low": 271.04, "close": 271.1, "volume": 206324.0}, {"time": "2025-03-04 17:56:00", "open": 271.13, "high": 271.5, "low": 270.55, "close": 270.64, "volume": 174885.0}, {"time": "2025-03-04 17:57:00", "open": 270.72, "high": 271.1, "low": 270.2641, "close": 270.74, "volume": 147227.0}, {"time": "2025-03-04 17:58:00", "open": 270.69, "high": 270.97, "low": 269.73, "close": 269.9785, "volume": 217246.0}, {"time": "2025-03-04 17:59:00", "open": 269.94, "high": 270.6396, "low": 269.86, "close": 270.43, "volume": 175354.0}, {"time": "2025-03-04 18:00:00", "open": 270.465, "high": 271.1805, "low": 270.19, "close": 270.685, "volume": 175510.0}, {"time": "2025-03-04 18:01:00", "open": 270.64, "high": 270.79, "low": 269.8, "close": 270.46, "volume": 171276.0}, {"time": "2025-03-04 18:02:00", "open": 270.46, "high": 270.46, "low": 269.77, "close": 270.14, "volume": 121045.0}, {"time": "2025-03-04 18:03:00", "open": 270.08, "high": 271.8, "low": 270.06, "close": 271.7785, "volume": 218234.0}, {"time": "2025-03-04 18:04:00", "open": 271.71, "high": 271.83, "low": 271.03, "close": 271.0516, "volume": 157533.0}, {"time": "2025-03-04 18:05:00", "open": 271.0383, "high": 271.74, "low": 270.77, "close": 271.1, "volume": 228466.0}, {"time": "2025-03-04 18:06:00", "open": 271.13, "high": 271.6599, "low": 270.71, "close": 270.9313, "volume": 165791.0}, {"time": "2025-03-04 18:07:00", "open": 270.984, "high": 271.0859, "low": 270.67, "close": 270.72, "volume": 87766.0}, {"time": "2025-03-04 18:08:00", "open": 270.7, "high": 272.4299, "low": 270.67, "close": 272.2271, "volume": 305871.0}, {"time": "2025-03-04 18:09:00", "open": 272.23, "high": 272.59, "low": 271.76, "close": 272.4, "volume": 207171.0}, {"time": "2025-03-04 18:10:00", "open": 272.4099, "high": 273.37, "low": 272.19, "close": 273.37, "volume": 317988.0}, {"time": "2025-03-04 18:11:00", "open": 273.38, "high": 273.55, "low": 273.0, "close": 273.4869, "volume": 228414.0}, {"time": "2025-03-04 18:12:00", "open": 273.44, "high": 274.35, "low": 273.44, "close": 273.96, "volume": 300013.0}, {"time": "2025-03-04 18:13:00", "open": 273.94, "high": 274.45, "low": 273.6901, "close": 273.95, "volume": 268138.0}, {"time": "2025-03-04 18:14:00", "open": 274.0, "high": 274.3845, "low": 273.8101, "close": 274.35, "volume": 236883.0}, {"time": "2025-03-04 18:15:00", "open": 274.12, "high": 274.38, "low": 273.68, "close": 273.85, "volume": 216226.0}, {"time": "2025-03-04 18:16:00", "open": 273.85, "high": 274.275, "low": 272.8, "close": 273.13, "volume": 290947.0}, {"time": "2025-03-04 18:17:00", "open": 273.06, "high": 273.1, "low": 272.17, "close": 272.678, "volume": 173365.0}, {"time": "2025-03-04 18:18:00", "open": 272.6175, "high": 272.67, "low": 271.42, "close": 272.05, "volume": 204190.0}, {"time": "2025-03-04 18:19:00", "open": 272.03, "high": 272.8464, "low": 271.95, "close": 272.32, "volume": 163714.0}, {"time": "2025-03-04 18:20:00", "open": 272.39, "high": 272.76, "low": 272.0, "close": 272.21, "volume": 131022.0}, {"time": "2025-03-04 18:21:00", "open": 272.18, "high": 272.7567, "low": 271.9, "close": 272.615, "volume": 139503.0}, {"time": "2025-03-04 18:22:00", "open": 272.615, "high": 272.7387, "low": 271.45, "close": 271.58, "volume": 118132.0}, {"time": "2025-03-04 18:23:00", "open": 271.6, "high": 271.93, "low": 271.22, "close": 271.64, "volume": 129459.0}, {"time": "2025-03-04 18:24:00", "open": 271.82, "high": 272.2495, "low": 271.55, "close": 272.1711, "volume": 111109.0}, {"time": "2025-03-04 18:25:00", "open": 272.12, "high": 272.39, "low": 271.4032, "close": 271.9401, "volume": 132145.0}, {"time": "2025-03-04 18:26:00", "open": 271.94, "high": 272.17, "low": 271.3913, "close": 271.835, "volume": 90268.0}, {"time": "2025-03-04 18:27:00", "open": 271.835, "high": 271.9322, "low": 271.42, "close": 271.7179, "volume": 65925.0}, {"time": "2025-03-04 18:28:00", "open": 271.53, "high": 271.6195, "low": 271.01, "close": 271.295, "volume": 133585.0}, {"time": "2025-03-04 18:29:00", "open": 271.315, "high": 271.4695, "low": 270.88, "close": 271.136, "volume": 118712.0}, {"time": "2025-03-04 18:30:00", "open": 271.1075, "high": 271.1075, "low": 270.12, "close": 270.39, "volume": 129477.0}, {"time": "2025-03-04 18:31:00", "open": 270.325, "high": 271.17, "low": 270.19, "close": 271.1099, "volume": 142527.0}, {"time": "2025-03-04 18:32:00", "open": 271.045, "high": 271.7, "low": 270.8529, "close": 271.55, "volume": 185234.0}, {"time": "2025-03-04 18:33:00", "open": 271.457, "high": 272.17, "low": 271.3, "close": 272.16, "volume": 164506.0}, {"time": "2025-03-04 18:34:00", "open": 272.17, "high": 272.4599, "low": 271.9501, "close": 272.155, "volume": 124141.0}, {"time": "2025-03-04 18:35:00", "open": 272.1109, "high": 272.56, "low": 271.84, "close": 272.18, "volume": 156502.0}, {"time": "2025-03-04 18:36:00", "open": 272.24, "high": 272.72, "low": 272.05, "close": 272.44, "volume": 119292.0}, {"time": "2025-03-04 18:37:00", "open": 272.46, "high": 272.84, "low": 271.92, "close": 272.7189, "volume": 128756.0}, {"time": "2025-03-04 18:38:00", "open": 272.78, "high": 272.95, "low": 272.08, "close": 272.19, "volume": 128677.0}, {"time": "2025-03-04 18:39:00", "open": 272.17, "high": 272.69, "low": 272.1001, "close": 272.65, "volume": 118006.0}, {"time": "2025-03-04 18:40:00", "open": 272.7, "high": 273.28, "low": 272.59, "close": 272.95, "volume": 163451.0}, {"time": "2025-03-04 18:41:00", "open": 272.95, "high": 273.17, "low": 272.54, "close": 273.115, "volume": 105000.0}, {"time": "2025-03-04 18:42:00", "open": 273.24, "high": 273.97, "low": 273.0101, "close": 273.78, "volume": 253724.0}, {"time": "2025-03-04 18:43:00", "open": 273.79, "high": 273.86, "low": 273.29, "close": 273.29, "volume": 174398.0}, {"time": "2025-03-04 18:44:00", "open": 273.425, "high": 273.44, "low": 272.63, "close": 273.3504, "volume": 199965.0}, {"time": "2025-03-04 18:45:00", "open": 273.26, "high": 273.58, "low": 273.09, "close": 273.46, "volume": 109640.0}, {"time": "2025-03-04 18:46:00", "open": 273.39, "high": 273.74, "low": 273.2001, "close": 273.475, "volume": 119346.0}, {"time": "2025-03-04 18:47:00", "open": 273.41, "high": 274.87, "low": 273.251, "close": 274.725, "volume": 235968.0}, {"time": "2025-03-04 18:48:00", "open": 274.725, "high": 274.725, "low": 273.94, "close": 274.19, "volume": 148006.0}, {"time": "2025-03-04 18:49:00", "open": 274.15, "high": 274.5, "low": 273.72, "close": 274.1106, "volume": 166186.0}, {"time": "2025-03-04 18:50:00", "open": 273.98, "high": 274.06, "low": 273.1431, "close": 273.47, "volume": 123790.0}, {"time": "2025-03-04 18:51:00", "open": 273.34, "high": 273.85, "low": 273.31, "close": 273.8298, "volume": 95194.0}, {"time": "2025-03-04 18:52:00", "open": 273.8294, "high": 274.58, "low": 273.7, "close": 274.3299, "volume": 146866.0}, {"time": "2025-03-04 18:53:00", "open": 274.33, "high": 274.7999, "low": 274.085, "close": 274.38, "volume": 142794.0}, {"time": "2025-03-04 18:54:00", "open": 274.4, "high": 274.6699, "low": 274.0, "close": 274.42, "volume": 102562.0}, {"time": "2025-03-04 18:55:00", "open": 274.42, "high": 275.0, "low": 274.2108, "close": 274.91, "volume": 184280.0}, {"time": "2025-03-04 18:56:00", "open": 274.92, "high": 275.66, "low": 274.89, "close": 275.56, "volume": 321504.0}, {"time": "2025-03-04 18:57:00", "open": 275.566, "high": 275.79, "low": 275.33, "close": 275.775, "volume": 155776.0}, {"time": "2025-03-04 18:58:00", "open": 275.75, "high": 276.6524, "low": 275.5101, "close": 276.28, "volume": 345303.0}, {"time": "2025-03-04 18:59:00", "open": 276.225, "high": 276.41, "low": 275.6149, "close": 276.35, "volume": 196718.0}, {"time": "2025-03-04 19:00:00", "open": 276.32, "high": 276.38, "low": 275.96, "close": 276.3106, "volume": 141013.0}, {"time": "2025-03-04 19:01:00", "open": 276.35, "high": 276.83, "low": 275.98, "close": 276.72, "volume": 166181.0}];
    const markersData = [{"time": "2025-03-04 16:29:00", "position": "aboveBar", "color": "#2196F3", "shape": "arrowDown", "text": "Pole Start 16:29"}, {"time": "2025-03-04 16:53:00", "position": "belowBar", "color": "#FF9800", "shape": "arrowUp", "text": "Pole End 24.0min 16:53"}, {"time": "2025-03-04 17:15:00", "position": "aboveBar", "color": "#9C27B0", "shape": "square", "text": "Convergence End 17:15"}, {"time": "2025-03-04 17:21:00", "position": "aboveBar", "color": "#4CAF50", "shape": "circle", "text": "End of Flagpole NEUTRAL 17:21"}, {"time": "2025-03-04 17:21:00", "position": "belowBar", "color": "#0EA5E9", "shape": "arrowUp", "text": "Entry: $270.35\nNEUTRAL"}, {"time": "2025-03-04 18:01:00", "position": "aboveBar", "color": "#00D4A3", "shape": "arrowDown", "text": "Exit: $270.46 +0.04%"}];
    const timingInfo = {"start": "2025-03-04 16:29:00", "end": "2025-03-04 17:21:00", "analysisEnd": "2025-03-04 18:01:00"};
    const forwardTestData = null;
    
    // Helper functions
    const dateToTimestamp = (dateStr) => {
        const [datePart, timePart] = dateStr.split(' ');
        const [year, month, day] = datePart.split('-').map(Number);
        const [hour, minute, second] = timePart.split(':').map(Number);
        const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute, second));
        return Math.floor(utcDate.getTime() / 1000);
    };
    
    const formatTime = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const hours = String(date.getUTCHours()).padStart(2, '0');
        const minutes = String(date.getUTCMinutes()).padStart(2, '0');
        return `${hours}:${minutes}`;
    };
    
    const formatDate = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    };
    
    // Wait for DOM and library
    const initChart = () => {
        const chartElement = document.getElementById('chart');
        
        if (!chartElement) {
            console.error('Chart element not found');
            return;
        }
        
        if (typeof window.LightweightCharts === 'undefined') {
            console.error('LightweightCharts library not loaded');
            chartElement.innerHTML = '<p style="color: red; padding: 20px;">Error: Chart library not loaded. Please refresh the page.</p>';
            return;
        }
        
        // Create chart with proper sizing
        const containerWidth = chartElement.offsetWidth || 800;
        chartOptions.width = containerWidth;
        
        // Height is already properly configured by chart layout system
        // No need to override here
        
        const chart = window.LightweightCharts.createChart(chartElement, chartOptions);
        
        // Custom time formatting for axis
        chart.applyOptions({
            timeScale: {
                tickMarkFormatter: (time, tickMarkType) => {
                    const date = new Date(time * 1000);
                    
                    // Different formats based on zoom level
                    switch(tickMarkType) {
                        case 0: // Year
                            return date.getUTCFullYear().toString();
                        case 1: // Month
                            return formatDate(time).substring(0, 7);
                        case 2: // Day
                            return formatDate(time).substring(5);
                        default: // Time
                            return formatTime(time);
                    }
                },
            },
            localization: {
                timeFormatter: (timestamp) => {
                    return `${formatDate(timestamp)} ${formatTime(timestamp)} UTC`;
                },
            },
        });
        
        // Create candlestick series
        const candlestickSeries = chart.addCandlestickSeries({"upColor": "#00D4A3", "downColor": "#FF4757", "borderVisible": false, "wickUpColor": "#00D4A3", "wickDownColor": "#FF4757", "wickVisible": true});
        
        // Set data
        const formattedData = candlestickData.map(d => ({
            time: dateToTimestamp(d.time),
            open: d.open,
            high: d.high,
            low: d.low,
            close: d.close,
        }));
        
        candlestickSeries.setData(formattedData);
        
        // Add markers
        if (markersData.length > 0) {
            const formattedMarkers = markersData.map(m => ({
                time: dateToTimestamp(m.time),
                position: m.position,
                color: m.color,
                shape: m.shape,
                text: m.text,
            }));
            
            candlestickSeries.setMarkers(formattedMarkers);
        }
        
        // Add flagpole zone
        
        // Create flagpole zone
        if (timingInfo.start && timingInfo.end) {
            const flagpoleAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(0, 212, 163, 0.3)',
                bottomColor: 'rgba(0, 212, 163, 0.1)',
                lineColor: 'rgba(0, 212, 163, 0.7)',
                lineWidth: 2,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for flagpole period
            const startTime = dateToTimestamp(timingInfo.start);
            const endTime = dateToTimestamp(timingInfo.end);
            const flagpoleData = formattedData.filter(d => d.time >= startTime && d.time <= endTime);
            
            if (flagpoleData.length > 0) {
                const maxPrice = Math.max(...flagpoleData.map(d => d.high));
                const areaData = flagpoleData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                flagpoleAreaSeries.setData(areaData);
            }
        }
        
        // Create analysis window zone
        if (timingInfo.analysisEnd) {
            const analysisAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(14, 165, 233, 0.2)',
                bottomColor: 'rgba(14, 165, 233, 0.05)',
                lineColor: 'rgba(14, 165, 233, 0.5)',
                lineWidth: 1,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for analysis period
            const endTime = dateToTimestamp(timingInfo.end);
            const analysisEndTime = dateToTimestamp(timingInfo.analysisEnd);
            const analysisData = formattedData.filter(d => d.time >= endTime && d.time <= analysisEndTime);
            
            if (analysisData.length > 0) {
                const maxPrice = Math.max(...analysisData.map(d => d.high));
                const areaData = analysisData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                analysisAreaSeries.setData(areaData);
            }
        }
        
        
        // Add legend if forward test data available
        
        // Create legend for forward test data
        if (forwardTestData) {
            const legend = document.createElement('div');
            legend.style.cssText = `
            position: absolute;
            left: 16px;
            top: 16px;
            background: rgba(11, 20, 38, 0.95);
            padding: 16px;
            border-radius: 8px;
            font-size: 11px;
            font-family: 'JetBrains Mono', 'SF Mono', 'Monaco', 'Consolas', monospace;
            font-weight: 500;
            color: #F8FAFC;
            border: 1px solid #334155;
            z-index: 1000;
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3), 0 0 20px rgba(0, 212, 163, 0.1);
        `;
            
            const isProfitable = forwardTestData.forwardReturn > 0;
            const signalColor = forwardTestData.signalType === 'BUY' ? 
                '#00D4A3' : '#FF4757';
            const returnColor = isProfitable ? 
                '#00D4A3' : '#FF4757';
            
            legend.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 6px; color: #333;">Forward Test Results</div>
                <div style="margin-bottom: 4px;">Signal: <span style="color: ${signalColor};font-weight:bold;">${forwardTestData.signalType}</span></div>
                <div style="margin-bottom: 4px;">Entry: <span style="font-weight:bold;">$${forwardTestData.entryPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Exit: <span style="font-weight:bold;">$${forwardTestData.exitPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Return: <span style="color: ${returnColor};font-weight:bold;">${(forwardTestData.forwardReturn * 100).toFixed(2)}%</span></div>
                <div>Window: <span style="font-weight:bold;">${forwardTestData.analysisWindow} minutes</span></div>
            `;
            
            chartElement.appendChild(legend);
        }
        
        
        // Handle window resize
        const handleResize = () => {
            const newWidth = chartElement.offsetWidth || 800;
            chart.applyOptions({ width: newWidth });
        };
        
        window.addEventListener('resize', handleResize);
        
        // Fit content and ensure time axis is visible
        chart.timeScale().fitContent();
        
        // Force time scale visibility
        chart.timeScale().applyOptions({
            visible: true,
            borderVisible: true,
            ticksVisible: true,
        });
        
        // Store chart instance for debugging
        window.chartInstance = chart;
        
        console.log('Chart initialized successfully');
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        initChart();
    }
})();
</script>

        </div>
    </div>
</body>
</html>