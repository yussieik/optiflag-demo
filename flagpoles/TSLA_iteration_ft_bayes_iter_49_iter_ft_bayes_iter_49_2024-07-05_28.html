<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flagpole - TSLA - cut-TSLA, 2024-07-05</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../index.html">Home</a> /
            <a href="../experiments/TSLA_bayes_iter_49.html">
                TSLA - bayes_iter_49
            </a> /
            <span>Flagpole Details</span>
        </nav>

        
        <nav class="flagpole-navigation">
            <div class="nav-container">
                <a href="TSLA_iteration_ft_bayes_iter_49_iter_ft_bayes_iter_49_2024-07-03_12.html" class="nav-btn prev-btn">← Previous</a>
                <span class="nav-info">
                    Flagpole 385 of 426
                </span>
                <a href="TSLA_iteration_ft_bayes_iter_49_iter_ft_bayes_iter_49_2024-07-08_98.html" class="nav-btn next-btn">Next →</a>
            </div>
            <div class="nav-experiment-link">
                <a href="../experiments/TSLA_bayes_iter_49.html" class="nav-btn experiment-btn">
                    ← Back to TSLA - bayes_iter_49
                </a>
            </div>
        </nav>
        

        <header>
            <h1>Flagpole Analysis</h1>
            <div class="flagpole-header-info">
                <span class="ticker">TSLA</span>
                <span class="timestamp">cut-TSLA, 2024-07-05</span>
            </div>
        </header>

        <div class="flagpole-content">
            <div class="section">
                <h2>Price Chart</h2>
                <div id="chart" style="height: 660px; background: white; border: 1px solid #e1e1e1; padding: 10px; box-sizing: border-box; overflow: visible;"></div>
            </div>
            
            
<script>
// Chart initialization for flagpole visualization
(function() {
    'use strict';
    
    // Configuration
    const chartOptions = {"height": 640, "layout": {"backgroundColor": "white", "textColor": "#191919", "fontSize": 20, "fontFamily": "'Trebuchet MS', Roboto, Ubuntu, sans-serif"}, "grid": {"vertLines": {"color": "#f0f0f0", "style": 0, "visible": true}, "horzLines": {"color": "#f0f0f0", "style": 0, "visible": true}}, "timeScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "timeVisible": true, "secondsVisible": false, "tickMarkColor": "#2B2B43", "rightBarStaysOnScroll": true, "fixLeftEdge": false, "fixRightEdge": false, "ticksVisible": true, "minBarSpacing": 0.5, "barSpacing": 6, "height": 40}, "rightPriceScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "ticksVisible": true, "scaleMargins": {"top": 0.1, "bottom": 0.2}}, "crosshair": {"mode": 0, "vertLine": {"visible": true, "labelVisible": true}, "horzLine": {"visible": true, "labelVisible": true}}, "localization": {"locale": "en-US", "dateFormat": "yyyy-MM-dd"}};
    const candlestickData = [{"time": "2024-07-05 16:09:00", "open": 246.2956, "high": 247.16, "low": 246.21, "close": 246.905, "volume": 433127.0}, {"time": "2024-07-05 16:10:00", "open": 246.85, "high": 246.92, "low": 246.39, "close": 246.5288, "volume": 296137.0}, {"time": "2024-07-05 16:11:00", "open": 246.536, "high": 246.6299, "low": 246.0167, "close": 246.03, "volume": 263508.0}, {"time": "2024-07-05 16:12:00", "open": 246.01, "high": 246.3883, "low": 245.97, "close": 246.0967, "volume": 291645.0}, {"time": "2024-07-05 16:13:00", "open": 246.13, "high": 246.75, "low": 246.1201, "close": 246.6797, "volume": 302618.0}, {"time": "2024-07-05 16:14:00", "open": 246.6797, "high": 247.06, "low": 246.61, "close": 246.83, "volume": 292963.0}, {"time": "2024-07-05 16:15:00", "open": 246.82, "high": 247.1346, "low": 246.63, "close": 246.77, "volume": 297508.0}, {"time": "2024-07-05 16:16:00", "open": 246.7475, "high": 246.8499, "low": 246.42, "close": 246.5901, "volume": 203409.0}, {"time": "2024-07-05 16:17:00", "open": 246.6, "high": 247.08, "low": 246.44, "close": 247.02, "volume": 212805.0}, {"time": "2024-07-05 16:18:00", "open": 247.09, "high": 247.1, "low": 246.75, "close": 246.82, "volume": 226404.0}, {"time": "2024-07-05 16:19:00", "open": 246.795, "high": 246.9, "low": 246.5, "close": 246.6, "volume": 200571.0}, {"time": "2024-07-05 16:20:00", "open": 246.6199, "high": 246.65, "low": 246.1706, "close": 246.64, "volume": 210199.0}, {"time": "2024-07-05 16:21:00", "open": 246.62, "high": 246.6799, "low": 246.227, "close": 246.645, "volume": 140267.0}, {"time": "2024-07-05 16:22:00", "open": 246.635, "high": 246.87, "low": 246.62, "close": 246.73, "volume": 158966.0}, {"time": "2024-07-05 16:23:00", "open": 246.7544, "high": 246.8272, "low": 246.55, "close": 246.6247, "volume": 94658.0}, {"time": "2024-07-05 16:24:00", "open": 246.59, "high": 246.62, "low": 246.2, "close": 246.2, "volume": 244909.0}, {"time": "2024-07-05 16:25:00", "open": 246.2, "high": 246.5799, "low": 246.1001, "close": 246.325, "volume": 195827.0}, {"time": "2024-07-05 16:26:00", "open": 246.29, "high": 246.55, "low": 246.28, "close": 246.4203, "volume": 133392.0}, {"time": "2024-07-05 16:27:00", "open": 246.45, "high": 246.6199, "low": 246.12, "close": 246.42, "volume": 210192.0}, {"time": "2024-07-05 16:28:00", "open": 246.44, "high": 246.4599, "low": 245.851, "close": 246.11, "volume": 283908.0}, {"time": "2024-07-05 16:29:00", "open": 246.12, "high": 246.1538, "low": 245.85, "close": 245.8587, "volume": 166781.0}, {"time": "2024-07-05 16:30:00", "open": 245.85, "high": 245.85, "low": 244.89, "close": 245.07, "volume": 799193.0}, {"time": "2024-07-05 16:31:00", "open": 245.0539, "high": 245.45, "low": 245.0539, "close": 245.3442, "volume": 282638.0}, {"time": "2024-07-05 16:32:00", "open": 245.3899, "high": 245.3899, "low": 245.1, "close": 245.2324, "volume": 182092.0}, {"time": "2024-07-05 16:33:00", "open": 245.25, "high": 245.66, "low": 245.22, "close": 245.63, "volume": 252941.0}, {"time": "2024-07-05 16:34:00", "open": 245.6072, "high": 246.14, "low": 245.6072, "close": 245.98, "volume": 298024.0}, {"time": "2024-07-05 16:35:00", "open": 246.0, "high": 246.45, "low": 245.71, "close": 246.3362, "volume": 384508.0}, {"time": "2024-07-05 16:36:00", "open": 246.3306, "high": 246.81, "low": 246.14, "close": 246.7301, "volume": 334852.0}, {"time": "2024-07-05 16:37:00", "open": 246.76, "high": 246.78, "low": 246.27, "close": 246.6903, "volume": 202729.0}, {"time": "2024-07-05 16:38:00", "open": 246.6754, "high": 246.98, "low": 246.35, "close": 246.74, "volume": 266285.0}, {"time": "2024-07-05 16:39:00", "open": 246.695, "high": 246.72, "low": 246.49, "close": 246.52, "volume": 127799.0}, {"time": "2024-07-05 16:40:00", "open": 246.5001, "high": 246.5999, "low": 246.36, "close": 246.475, "volume": 143247.0}, {"time": "2024-07-05 16:41:00", "open": 246.4364, "high": 246.4609, "low": 246.16, "close": 246.19, "volume": 160666.0}, {"time": "2024-07-05 16:42:00", "open": 246.1602, "high": 246.2299, "low": 245.7, "close": 245.815, "volume": 275547.0}, {"time": "2024-07-05 16:43:00", "open": 245.8, "high": 246.4396, "low": 245.76, "close": 246.3933, "volume": 246897.0}, {"time": "2024-07-05 16:44:00", "open": 246.42, "high": 246.5599, "low": 246.15, "close": 246.39, "volume": 167189.0}, {"time": "2024-07-05 16:45:00", "open": 246.3802, "high": 246.69, "low": 246.2001, "close": 246.5599, "volume": 186517.0}, {"time": "2024-07-05 16:46:00", "open": 246.56, "high": 246.6199, "low": 246.3, "close": 246.32, "volume": 93201.0}, {"time": "2024-07-05 16:47:00", "open": 246.3101, "high": 246.4381, "low": 246.26, "close": 246.35, "volume": 110136.0}, {"time": "2024-07-05 16:48:00", "open": 246.365, "high": 246.37, "low": 246.06, "close": 246.15, "volume": 123874.0}, {"time": "2024-07-05 16:49:00", "open": 246.13, "high": 246.19, "low": 245.85, "close": 245.8538, "volume": 147428.0}, {"time": "2024-07-05 16:50:00", "open": 245.875, "high": 246.3999, "low": 245.8001, "close": 246.02, "volume": 193347.0}, {"time": "2024-07-05 16:51:00", "open": 246.075, "high": 246.4, "low": 245.7611, "close": 246.1032, "volume": 188038.0}, {"time": "2024-07-05 16:52:00", "open": 246.0755, "high": 246.21, "low": 245.8404, "close": 245.93, "volume": 134812.0}, {"time": "2024-07-05 16:53:00", "open": 245.9267, "high": 246.339, "low": 245.4402, "close": 245.48, "volume": 276163.0}, {"time": "2024-07-05 16:54:00", "open": 245.5, "high": 245.7428, "low": 245.22, "close": 245.7393, "volume": 268518.0}, {"time": "2024-07-05 16:55:00", "open": 245.74, "high": 245.78, "low": 245.3601, "close": 245.6201, "volume": 169351.0}, {"time": "2024-07-05 16:56:00", "open": 245.63, "high": 245.83, "low": 245.52, "close": 245.7878, "volume": 119144.0}, {"time": "2024-07-05 16:57:00", "open": 245.79, "high": 245.9477, "low": 245.53, "close": 245.5405, "volume": 174420.0}, {"time": "2024-07-05 16:58:00", "open": 245.565, "high": 245.99, "low": 245.42, "close": 245.945, "volume": 187492.0}, {"time": "2024-07-05 16:59:00", "open": 245.9679, "high": 246.26, "low": 245.9679, "close": 246.1156, "volume": 182918.0}, {"time": "2024-07-05 17:00:00", "open": 246.14, "high": 246.25, "low": 246.0, "close": 246.11, "volume": 158002.0}, {"time": "2024-07-05 17:01:00", "open": 246.16, "high": 246.16, "low": 245.85, "close": 246.0559, "volume": 106613.0}, {"time": "2024-07-05 17:02:00", "open": 246.048, "high": 246.0683, "low": 245.62, "close": 245.73, "volume": 143522.0}, {"time": "2024-07-05 17:03:00", "open": 245.71, "high": 245.8, "low": 245.32, "close": 245.32, "volume": 188754.0}, {"time": "2024-07-05 17:04:00", "open": 245.3039, "high": 245.38, "low": 245.02, "close": 245.1705, "volume": 259320.0}, {"time": "2024-07-05 17:05:00", "open": 245.18, "high": 245.64, "low": 245.17, "close": 245.51, "volume": 273209.0}, {"time": "2024-07-05 17:06:00", "open": 245.5, "high": 245.52, "low": 244.6801, "close": 244.7425, "volume": 388126.0}, {"time": "2024-07-05 17:07:00", "open": 244.745, "high": 244.94, "low": 244.44, "close": 244.59, "volume": 332323.0}, {"time": "2024-07-05 17:08:00", "open": 244.56, "high": 244.75, "low": 244.3301, "close": 244.3685, "volume": 244968.0}, {"time": "2024-07-05 17:09:00", "open": 244.34, "high": 244.68, "low": 244.11, "close": 244.21, "volume": 282198.0}, {"time": "2024-07-05 17:10:00", "open": 244.1721, "high": 244.5399, "low": 243.94, "close": 244.415, "volume": 417795.0}, {"time": "2024-07-05 17:11:00", "open": 244.39, "high": 244.83, "low": 244.39, "close": 244.69, "volume": 264095.0}, {"time": "2024-07-05 17:12:00", "open": 244.71, "high": 244.89, "low": 244.59, "close": 244.675, "volume": 164667.0}, {"time": "2024-07-05 17:13:00", "open": 244.675, "high": 245.0694, "low": 244.6, "close": 245.0, "volume": 277197.0}, {"time": "2024-07-05 17:14:00", "open": 244.9812, "high": 245.15, "low": 244.7706, "close": 245.105, "volume": 169216.0}, {"time": "2024-07-05 17:15:00", "open": 245.105, "high": 245.8847, "low": 245.07, "close": 245.556, "volume": 364455.0}, {"time": "2024-07-05 17:16:00", "open": 245.5504, "high": 245.6398, "low": 245.26, "close": 245.6326, "volume": 208764.0}, {"time": "2024-07-05 17:17:00", "open": 245.6127, "high": 245.835, "low": 245.37, "close": 245.535, "volume": 202162.0}, {"time": "2024-07-05 17:18:00", "open": 245.5549, "high": 245.8499, "low": 245.4, "close": 245.8221, "volume": 187440.0}, {"time": "2024-07-05 17:19:00", "open": 245.8465, "high": 246.18, "low": 245.75, "close": 246.0001, "volume": 304873.0}, {"time": "2024-07-05 17:20:00", "open": 246.035, "high": 246.07, "low": 245.84, "close": 245.96, "volume": 146508.0}, {"time": "2024-07-05 17:21:00", "open": 245.9642, "high": 245.9642, "low": 245.721, "close": 245.8021, "volume": 145076.0}, {"time": "2024-07-05 17:22:00", "open": 245.8, "high": 246.1, "low": 245.78, "close": 245.96, "volume": 197072.0}, {"time": "2024-07-05 17:23:00", "open": 245.97, "high": 246.06, "low": 245.85, "close": 245.93, "volume": 143376.0}, {"time": "2024-07-05 17:24:00", "open": 245.9001, "high": 246.18, "low": 245.9001, "close": 246.07, "volume": 154850.0}, {"time": "2024-07-05 17:25:00", "open": 246.09, "high": 246.79, "low": 246.07, "close": 246.7129, "volume": 484605.0}, {"time": "2024-07-05 17:26:00", "open": 246.68, "high": 246.9899, "low": 246.62, "close": 246.65, "volume": 305618.0}, {"time": "2024-07-05 17:27:00", "open": 246.67, "high": 246.9573, "low": 246.6, "close": 246.9573, "volume": 218096.0}, {"time": "2024-07-05 17:28:00", "open": 246.96, "high": 247.08, "low": 246.53, "close": 246.6806, "volume": 249876.0}, {"time": "2024-07-05 17:29:00", "open": 246.6458, "high": 246.77, "low": 246.61, "close": 246.645, "volume": 134665.0}, {"time": "2024-07-05 17:30:00", "open": 246.632, "high": 246.9, "low": 246.53, "close": 246.57, "volume": 184554.0}, {"time": "2024-07-05 17:31:00", "open": 246.534, "high": 246.88, "low": 246.534, "close": 246.7299, "volume": 136747.0}, {"time": "2024-07-05 17:32:00", "open": 246.7003, "high": 246.85, "low": 246.6001, "close": 246.7404, "volume": 175830.0}, {"time": "2024-07-05 17:33:00", "open": 246.74, "high": 247.05, "low": 246.4, "close": 247.0041, "volume": 279553.0}, {"time": "2024-07-05 17:34:00", "open": 247.04, "high": 247.44, "low": 246.98, "close": 247.325, "volume": 353796.0}, {"time": "2024-07-05 17:35:00", "open": 247.34, "high": 247.3805, "low": 247.0101, "close": 247.12, "volume": 236581.0}, {"time": "2024-07-05 17:36:00", "open": 247.0933, "high": 247.34, "low": 247.03, "close": 247.09, "volume": 149769.0}, {"time": "2024-07-05 17:37:00", "open": 247.105, "high": 247.1488, "low": 246.88, "close": 246.925, "volume": 177415.0}, {"time": "2024-07-05 17:38:00", "open": 246.925, "high": 247.31, "low": 246.9077, "close": 247.31, "volume": 195523.0}, {"time": "2024-07-05 17:39:00", "open": 247.32, "high": 247.3399, "low": 247.077, "close": 247.2399, "volume": 155789.0}, {"time": "2024-07-05 17:40:00", "open": 247.2, "high": 247.2499, "low": 246.8947, "close": 246.9301, "volume": 151857.0}, {"time": "2024-07-05 17:41:00", "open": 246.9145, "high": 247.1, "low": 246.76, "close": 247.0819, "volume": 222845.0}, {"time": "2024-07-05 17:42:00", "open": 247.09, "high": 247.7889, "low": 247.09, "close": 247.7211, "volume": 381218.0}, {"time": "2024-07-05 17:43:00", "open": 247.71, "high": 247.83, "low": 247.65, "close": 247.6568, "volume": 221710.0}, {"time": "2024-07-05 17:44:00", "open": 247.675, "high": 247.75, "low": 247.5, "close": 247.7206, "volume": 160494.0}, {"time": "2024-07-05 17:45:00", "open": 247.75, "high": 248.0, "low": 247.64, "close": 247.8522, "volume": 302567.0}, {"time": "2024-07-05 17:46:00", "open": 247.86, "high": 248.14, "low": 247.7978, "close": 248.085, "volume": 277501.0}, {"time": "2024-07-05 17:47:00", "open": 248.085, "high": 248.09, "low": 247.85, "close": 247.94, "volume": 176270.0}, {"time": "2024-07-05 17:48:00", "open": 247.945, "high": 247.9497, "low": 247.54, "close": 247.68, "volume": 206417.0}, {"time": "2024-07-05 17:49:00", "open": 247.62, "high": 247.9, "low": 247.5, "close": 247.5259, "volume": 216186.0}, {"time": "2024-07-05 17:50:00", "open": 247.54, "high": 247.76, "low": 247.37, "close": 247.735, "volume": 216836.0}, {"time": "2024-07-05 17:51:00", "open": 247.7541, "high": 248.07, "low": 247.71, "close": 247.8285, "volume": 260735.0}, {"time": "2024-07-05 17:52:00", "open": 247.8059, "high": 247.8399, "low": 247.4, "close": 247.55, "volume": 212805.0}, {"time": "2024-07-05 17:53:00", "open": 247.5041, "high": 247.68, "low": 247.105, "close": 247.6541, "volume": 284041.0}, {"time": "2024-07-05 17:54:00", "open": 247.6567, "high": 247.8, "low": 247.44, "close": 247.77, "volume": 177215.0}, {"time": "2024-07-05 17:55:00", "open": 247.7701, "high": 248.0, "low": 247.72, "close": 247.9, "volume": 209202.0}, {"time": "2024-07-05 17:56:00", "open": 247.88, "high": 247.95, "low": 247.75, "close": 247.8539, "volume": 115700.0}, {"time": "2024-07-05 17:57:00", "open": 247.88, "high": 248.21, "low": 247.78, "close": 248.0314, "volume": 269438.0}, {"time": "2024-07-05 17:58:00", "open": 248.0304, "high": 248.579, "low": 247.98, "close": 248.4301, "volume": 360798.0}, {"time": "2024-07-05 17:59:00", "open": 248.45, "high": 248.89, "low": 248.4101, "close": 248.72, "volume": 471863.0}, {"time": "2024-07-05 18:00:00", "open": 248.7495, "high": 248.8, "low": 248.35, "close": 248.42, "volume": 232168.0}, {"time": "2024-07-05 18:01:00", "open": 248.4199, "high": 248.43, "low": 247.94, "close": 248.09, "volume": 297595.0}, {"time": "2024-07-05 18:02:00", "open": 248.089, "high": 248.3899, "low": 248.0503, "close": 248.28, "volume": 254381.0}, {"time": "2024-07-05 18:03:00", "open": 248.27, "high": 248.52, "low": 248.21, "close": 248.42, "volume": 183086.0}, {"time": "2024-07-05 18:04:00", "open": 248.4148, "high": 248.71, "low": 248.41, "close": 248.66, "volume": 241163.0}, {"time": "2024-07-05 18:05:00", "open": 248.66, "high": 249.29, "low": 248.41, "close": 249.1517, "volume": 608825.0}, {"time": "2024-07-05 18:06:00", "open": 249.14, "high": 249.5394, "low": 249.0701, "close": 249.2501, "volume": 525349.0}, {"time": "2024-07-05 18:07:00", "open": 249.225, "high": 249.48, "low": 249.03, "close": 249.3799, "volume": 346835.0}, {"time": "2024-07-05 18:08:00", "open": 249.36, "high": 249.71, "low": 249.33, "close": 249.64, "volume": 386632.0}, {"time": "2024-07-05 18:09:00", "open": 249.622, "high": 249.71, "low": 249.22, "close": 249.52, "volume": 340364.0}, {"time": "2024-07-05 18:10:00", "open": 249.5, "high": 249.83, "low": 249.4301, "close": 249.7601, "volume": 383276.0}, {"time": "2024-07-05 18:11:00", "open": 249.785, "high": 250.31, "low": 249.51, "close": 250.17, "volume": 944952.0}, {"time": "2024-07-05 18:12:00", "open": 250.2, "high": 250.28, "low": 249.36, "close": 249.3601, "volume": 453963.0}, {"time": "2024-07-05 18:13:00", "open": 249.39, "high": 249.79, "low": 249.37, "close": 249.4405, "volume": 267201.0}, {"time": "2024-07-05 18:14:00", "open": 249.45, "high": 249.45, "low": 249.04, "close": 249.1091, "volume": 390889.0}, {"time": "2024-07-05 18:15:00", "open": 249.1345, "high": 249.51, "low": 249.1, "close": 249.375, "volume": 302182.0}, {"time": "2024-07-05 18:16:00", "open": 249.42, "high": 249.46, "low": 249.0294, "close": 249.21, "volume": 233062.0}, {"time": "2024-07-05 18:17:00", "open": 249.2, "high": 249.39, "low": 249.0412, "close": 249.3302, "volume": 232368.0}, {"time": "2024-07-05 18:18:00", "open": 249.3047, "high": 249.44, "low": 249.02, "close": 249.1, "volume": 217853.0}, {"time": "2024-07-05 18:19:00", "open": 249.09, "high": 249.34, "low": 249.07, "close": 249.2599, "volume": 168046.0}, {"time": "2024-07-05 18:20:00", "open": 249.236, "high": 249.41, "low": 249.01, "close": 249.1398, "volume": 259495.0}, {"time": "2024-07-05 18:21:00", "open": 249.145, "high": 249.22, "low": 249.0, "close": 249.04, "volume": 209544.0}, {"time": "2024-07-05 18:22:00", "open": 249.03, "high": 249.21, "low": 248.71, "close": 249.06, "volume": 388528.0}, {"time": "2024-07-05 18:23:00", "open": 249.0, "high": 249.31, "low": 249.0, "close": 249.07, "volume": 219943.0}, {"time": "2024-07-05 18:24:00", "open": 249.0699, "high": 249.75, "low": 249.0, "close": 249.725, "volume": 340855.0}, {"time": "2024-07-05 18:25:00", "open": 249.74, "high": 250.06, "low": 249.6, "close": 250.0127, "volume": 425493.0}, {"time": "2024-07-05 18:26:00", "open": 250.0101, "high": 250.0955, "low": 249.29, "close": 249.326, "volume": 370615.0}, {"time": "2024-07-05 18:27:00", "open": 249.3317, "high": 249.42, "low": 248.95, "close": 249.1505, "volume": 293018.0}, {"time": "2024-07-05 18:28:00", "open": 249.18, "high": 249.55, "low": 249.03, "close": 249.2307, "volume": 240703.0}, {"time": "2024-07-05 18:29:00", "open": 249.23, "high": 249.4199, "low": 249.07, "close": 249.215, "volume": 172359.0}, {"time": "2024-07-05 18:30:00", "open": 249.191, "high": 249.3799, "low": 249.04, "close": 249.2099, "volume": 159922.0}, {"time": "2024-07-05 18:31:00", "open": 249.15, "high": 249.1899, "low": 248.6, "close": 248.995, "volume": 343738.0}, {"time": "2024-07-05 18:32:00", "open": 248.9534, "high": 249.32, "low": 248.9295, "close": 249.08, "volume": 161771.0}, {"time": "2024-07-05 18:33:00", "open": 249.0934, "high": 249.34, "low": 248.923, "close": 248.98, "volume": 174686.0}, {"time": "2024-07-05 18:34:00", "open": 249.02, "high": 249.2, "low": 248.67, "close": 248.9, "volume": 216361.0}, {"time": "2024-07-05 18:35:00", "open": 248.9, "high": 248.9299, "low": 248.53, "close": 248.73, "volume": 261561.0}, {"time": "2024-07-05 18:36:00", "open": 248.7599, "high": 248.7775, "low": 248.54, "close": 248.55, "volume": 122240.0}, {"time": "2024-07-05 18:37:00", "open": 248.5548, "high": 248.73, "low": 248.51, "close": 248.56, "volume": 250220.0}, {"time": "2024-07-05 18:38:00", "open": 248.577, "high": 248.8, "low": 248.51, "close": 248.7, "volume": 157574.0}, {"time": "2024-07-05 18:39:00", "open": 248.7, "high": 248.7, "low": 248.51, "close": 248.581, "volume": 115131.0}, {"time": "2024-07-05 18:40:00", "open": 248.58, "high": 248.75, "low": 248.5, "close": 248.655, "volume": 197712.0}, {"time": "2024-07-05 18:41:00", "open": 248.6666, "high": 248.73, "low": 248.48, "close": 248.59, "volume": 181039.0}, {"time": "2024-07-05 18:42:00", "open": 248.62, "high": 248.78, "low": 248.4, "close": 248.4601, "volume": 225354.0}, {"time": "2024-07-05 18:43:00", "open": 248.4381, "high": 248.7187, "low": 248.27, "close": 248.7, "volume": 253152.0}, {"time": "2024-07-05 18:44:00", "open": 248.71, "high": 249.1576, "low": 248.69, "close": 249.0983, "volume": 322064.0}, {"time": "2024-07-05 18:45:00", "open": 249.0837, "high": 249.1, "low": 248.73, "close": 248.994, "volume": 233772.0}, {"time": "2024-07-05 18:46:00", "open": 249.006, "high": 249.28, "low": 248.9036, "close": 248.9883, "volume": 225092.0}, {"time": "2024-07-05 18:47:00", "open": 248.9301, "high": 248.9555, "low": 248.63, "close": 248.83, "volume": 155188.0}, {"time": "2024-07-05 18:48:00", "open": 248.85, "high": 249.12, "low": 248.8101, "close": 248.9615, "volume": 160869.0}, {"time": "2024-07-05 18:49:00", "open": 248.9668, "high": 249.3, "low": 248.76, "close": 249.24, "volume": 202304.0}, {"time": "2024-07-05 18:50:00", "open": 249.2401, "high": 249.5, "low": 249.0, "close": 249.465, "volume": 240212.0}, {"time": "2024-07-05 18:51:00", "open": 249.4549, "high": 249.4999, "low": 249.06, "close": 249.2, "volume": 195148.0}, {"time": "2024-07-05 18:52:00", "open": 249.2, "high": 249.5499, "low": 249.17, "close": 249.28, "volume": 203704.0}, {"time": "2024-07-05 18:53:00", "open": 249.2584, "high": 249.4299, "low": 249.15, "close": 249.255, "volume": 158299.0}, {"time": "2024-07-05 18:54:00", "open": 249.25, "high": 249.4199, "low": 249.24, "close": 249.31, "volume": 123558.0}, {"time": "2024-07-05 18:55:00", "open": 249.31, "high": 249.56, "low": 249.28, "close": 249.3, "volume": 181597.0}, {"time": "2024-07-05 18:56:00", "open": 249.28, "high": 249.4499, "low": 249.24, "close": 249.37, "volume": 149881.0}, {"time": "2024-07-05 18:57:00", "open": 249.36, "high": 249.41, "low": 249.24, "close": 249.33, "volume": 132534.0}, {"time": "2024-07-05 18:58:00", "open": 249.3499, "high": 249.3499, "low": 248.97, "close": 249.225, "volume": 218608.0}, {"time": "2024-07-05 18:59:00", "open": 249.21, "high": 249.25, "low": 248.9, "close": 248.95, "volume": 139088.0}, {"time": "2024-07-05 19:00:00", "open": 248.94, "high": 249.0997, "low": 248.79, "close": 248.9556, "volume": 195493.0}, {"time": "2024-07-05 19:01:00", "open": 248.96, "high": 249.07, "low": 248.83, "close": 248.9501, "volume": 140273.0}, {"time": "2024-07-05 19:02:00", "open": 248.9732, "high": 249.5, "low": 248.9539, "close": 249.38, "volume": 274000.0}, {"time": "2024-07-05 19:03:00", "open": 249.3652, "high": 249.3799, "low": 249.1001, "close": 249.36, "volume": 131241.0}, {"time": "2024-07-05 19:04:00", "open": 249.3538, "high": 249.49, "low": 249.32, "close": 249.394, "volume": 166589.0}, {"time": "2024-07-05 19:05:00", "open": 249.4099, "high": 249.8, "low": 249.37, "close": 249.8, "volume": 263568.0}, {"time": "2024-07-05 19:06:00", "open": 249.8, "high": 249.95, "low": 249.78, "close": 249.95, "volume": 299539.0}, {"time": "2024-07-05 19:07:00", "open": 249.9499, "high": 249.96, "low": 249.73, "close": 249.73, "volume": 186862.0}, {"time": "2024-07-05 19:08:00", "open": 249.74, "high": 250.03, "low": 249.65, "close": 249.9401, "volume": 364211.0}, {"time": "2024-07-05 19:09:00", "open": 249.97, "high": 249.99, "low": 249.82, "close": 249.9237, "volume": 159007.0}, {"time": "2024-07-05 19:10:00", "open": 249.9563, "high": 250.24, "low": 249.68, "close": 249.7616, "volume": 504331.0}, {"time": "2024-07-05 19:11:00", "open": 249.7601, "high": 249.9999, "low": 249.72, "close": 249.86, "volume": 184472.0}, {"time": "2024-07-05 19:12:00", "open": 249.8201, "high": 249.8799, "low": 249.46, "close": 249.5801, "volume": 226531.0}, {"time": "2024-07-05 19:13:00", "open": 249.6072, "high": 249.68, "low": 249.35, "close": 249.6599, "volume": 192952.0}, {"time": "2024-07-05 19:14:00", "open": 249.6454, "high": 250.0, "low": 249.6454, "close": 249.9156, "volume": 257009.0}, {"time": "2024-07-05 19:15:00", "open": 249.9006, "high": 250.43, "low": 249.87, "close": 250.324, "volume": 401801.0}, {"time": "2024-07-05 19:16:00", "open": 250.32, "high": 250.37, "low": 250.16, "close": 250.2485, "volume": 279640.0}, {"time": "2024-07-05 19:17:00", "open": 250.2473, "high": 250.55, "low": 250.23, "close": 250.3754, "volume": 393924.0}, {"time": "2024-07-05 19:18:00", "open": 250.37, "high": 250.78, "low": 250.3528, "close": 250.65, "volume": 411497.0}, {"time": "2024-07-05 19:19:00", "open": 250.6501, "high": 251.375, "low": 250.65, "close": 251.344, "volume": 691995.0}, {"time": "2024-07-05 19:20:00", "open": 251.34, "high": 251.58, "low": 251.2, "close": 251.4098, "volume": 562571.0}, {"time": "2024-07-05 19:21:00", "open": 251.381, "high": 251.3954, "low": 250.94, "close": 251.0314, "volume": 473443.0}, {"time": "2024-07-05 19:22:00", "open": 251.04, "high": 251.47, "low": 251.02, "close": 251.418, "volume": 286070.0}, {"time": "2024-07-05 19:23:00", "open": 251.4, "high": 251.57, "low": 251.14, "close": 251.23, "volume": 389243.0}, {"time": "2024-07-05 19:24:00", "open": 251.215, "high": 251.47, "low": 251.1125, "close": 251.3708, "volume": 275918.0}, {"time": "2024-07-05 19:25:00", "open": 251.4, "high": 251.42, "low": 250.7, "close": 250.75, "volume": 395185.0}, {"time": "2024-07-05 19:26:00", "open": 250.77, "high": 251.0, "low": 250.57, "close": 250.96, "volume": 368159.0}, {"time": "2024-07-05 19:27:00", "open": 250.97, "high": 251.16, "low": 250.82, "close": 250.885, "volume": 242864.0}, {"time": "2024-07-05 19:28:00", "open": 250.885, "high": 251.16, "low": 250.6508, "close": 250.68, "volume": 278386.0}, {"time": "2024-07-05 19:29:00", "open": 250.6961, "high": 250.7424, "low": 250.43, "close": 250.5232, "volume": 276550.0}, {"time": "2024-07-05 19:30:00", "open": 250.54, "high": 250.7199, "low": 250.26, "close": 250.32, "volume": 303863.0}, {"time": "2024-07-05 19:31:00", "open": 250.3177, "high": 250.56, "low": 250.2, "close": 250.4499, "volume": 300865.0}, {"time": "2024-07-05 19:32:00", "open": 250.4499, "high": 250.55, "low": 250.26, "close": 250.4718, "volume": 194093.0}, {"time": "2024-07-05 19:33:00", "open": 250.47, "high": 250.6, "low": 250.3, "close": 250.5211, "volume": 219421.0}, {"time": "2024-07-05 19:34:00", "open": 250.5399, "high": 250.57, "low": 250.32, "close": 250.425, "volume": 190432.0}, {"time": "2024-07-05 19:35:00", "open": 250.39, "high": 250.4452, "low": 249.96, "close": 250.115, "volume": 457140.0}, {"time": "2024-07-05 19:36:00", "open": 250.1286, "high": 250.3895, "low": 249.81, "close": 250.3, "volume": 380251.0}, {"time": "2024-07-05 19:37:00", "open": 250.31, "high": 250.34, "low": 250.0801, "close": 250.11, "volume": 181443.0}, {"time": "2024-07-05 19:38:00", "open": 250.14, "high": 250.19, "low": 249.78, "close": 249.8101, "volume": 305002.0}, {"time": "2024-07-05 19:39:00", "open": 249.84, "high": 250.085, "low": 249.5701, "close": 249.605, "volume": 335537.0}, {"time": "2024-07-05 19:40:00", "open": 249.61, "high": 249.87, "low": 249.48, "close": 249.74, "volume": 356015.0}, {"time": "2024-07-05 19:41:00", "open": 249.735, "high": 250.2, "low": 249.725, "close": 250.005, "volume": 407652.0}, {"time": "2024-07-05 19:42:00", "open": 249.99, "high": 250.18, "low": 249.75, "close": 249.87, "volume": 264161.0}, {"time": "2024-07-05 19:43:00", "open": 249.86, "high": 249.9699, "low": 249.72, "close": 249.8436, "volume": 179476.0}, {"time": "2024-07-05 19:44:00", "open": 249.8475, "high": 250.15, "low": 249.81, "close": 249.9825, "volume": 234494.0}, {"time": "2024-07-05 19:45:00", "open": 249.97, "high": 250.14, "low": 249.85, "close": 249.9993, "volume": 219657.0}, {"time": "2024-07-05 19:46:00", "open": 250.0038, "high": 250.43, "low": 249.97, "close": 250.3699, "volume": 327422.0}, {"time": "2024-07-05 19:47:00", "open": 250.366, "high": 250.367, "low": 249.73, "close": 249.8101, "volume": 304825.0}, {"time": "2024-07-05 19:48:00", "open": 249.8199, "high": 249.9588, "low": 249.6701, "close": 249.6872, "volume": 256417.0}, {"time": "2024-07-05 19:49:00", "open": 249.7076, "high": 250.02, "low": 249.67, "close": 249.83, "volume": 276124.0}, {"time": "2024-07-05 19:50:00", "open": 249.86, "high": 250.5, "low": 249.86, "close": 249.9001, "volume": 491112.0}, {"time": "2024-07-05 19:51:00", "open": 249.92, "high": 250.261, "low": 249.67, "close": 250.045, "volume": 319985.0}, {"time": "2024-07-05 19:52:00", "open": 250.07, "high": 250.34, "low": 249.78, "close": 250.2101, "volume": 351762.0}, {"time": "2024-07-05 19:53:00", "open": 250.23, "high": 250.689, "low": 250.0601, "close": 250.5234, "volume": 436556.0}, {"time": "2024-07-05 19:54:00", "open": 250.535, "high": 251.0, "low": 250.27, "close": 251.0, "volume": 465129.0}, {"time": "2024-07-05 19:55:00", "open": 251.0, "high": 251.4, "low": 250.93, "close": 251.21, "volume": 580274.0}, {"time": "2024-07-05 19:56:00", "open": 251.21, "high": 251.71, "low": 251.14, "close": 251.698, "volume": 535005.0}, {"time": "2024-07-05 19:57:00", "open": 251.6833, "high": 251.82, "low": 251.61, "close": 251.728, "volume": 673308.0}, {"time": "2024-07-05 19:58:00", "open": 251.71, "high": 251.83, "low": 251.64, "close": 251.82, "volume": 494367.0}, {"time": "2024-07-05 19:59:00", "open": 251.83, "high": 251.83, "low": 251.06, "close": 251.42, "volume": 1100162.0}, {"time": "2024-07-05 20:00:00", "open": 251.52, "high": 251.9, "low": 250.8, "close": 251.41, "volume": 502724.0}];
    const markersData = [{"time": "2024-07-05 17:09:00", "position": "aboveBar", "color": "#2196F3", "shape": "arrowDown", "text": "Pole Start 17:09"}, {"time": "2024-07-05 18:15:00", "position": "belowBar", "color": "#FF9800", "shape": "arrowUp", "text": "Pole End 66.0min 18:15"}, {"time": "2024-07-05 18:37:00", "position": "aboveBar", "color": "#9C27B0", "shape": "square", "text": "Convergence End 18:37"}, {"time": "2024-07-05 19:15:00", "position": "aboveBar", "color": "#4CAF50", "shape": "circle", "text": "End of Flagpole NEUTRAL 19:15"}, {"time": "2024-07-05 19:15:00", "position": "belowBar", "color": "#2196F3", "shape": "arrowUp", "text": "Entry: $250.25\nNEUTRAL"}, {"time": "2024-07-05 19:55:00", "position": "aboveBar", "color": "#4CAF50", "shape": "arrowDown", "text": "Exit: $251.21 +0.38%"}];
    const timingInfo = {"start": "2024-07-05 17:09:00", "end": "2024-07-05 19:15:00", "analysisEnd": "2024-07-05 19:55:00"};
    const forwardTestData = null;
    
    // Helper functions
    const dateToTimestamp = (dateStr) => {
        const [datePart, timePart] = dateStr.split(' ');
        const [year, month, day] = datePart.split('-').map(Number);
        const [hour, minute, second] = timePart.split(':').map(Number);
        const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute, second));
        return Math.floor(utcDate.getTime() / 1000);
    };
    
    const formatTime = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const hours = String(date.getUTCHours()).padStart(2, '0');
        const minutes = String(date.getUTCMinutes()).padStart(2, '0');
        return `${hours}:${minutes}`;
    };
    
    const formatDate = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    };
    
    // Wait for DOM and library
    const initChart = () => {
        const chartElement = document.getElementById('chart');
        
        if (!chartElement) {
            console.error('Chart element not found');
            return;
        }
        
        if (typeof window.LightweightCharts === 'undefined') {
            console.error('LightweightCharts library not loaded');
            chartElement.innerHTML = '<p style="color: red; padding: 20px;">Error: Chart library not loaded. Please refresh the page.</p>';
            return;
        }
        
        // Create chart with proper sizing
        const containerWidth = chartElement.offsetWidth || 800;
        chartOptions.width = containerWidth;
        
        // Height is already properly configured by chart layout system
        // No need to override here
        
        const chart = window.LightweightCharts.createChart(chartElement, chartOptions);
        
        // Custom time formatting for axis
        chart.applyOptions({
            timeScale: {
                tickMarkFormatter: (time, tickMarkType) => {
                    const date = new Date(time * 1000);
                    
                    // Different formats based on zoom level
                    switch(tickMarkType) {
                        case 0: // Year
                            return date.getUTCFullYear().toString();
                        case 1: // Month
                            return formatDate(time).substring(0, 7);
                        case 2: // Day
                            return formatDate(time).substring(5);
                        default: // Time
                            return formatTime(time);
                    }
                },
            },
            localization: {
                timeFormatter: (timestamp) => {
                    return `${formatDate(timestamp)} ${formatTime(timestamp)} UTC`;
                },
            },
        });
        
        // Create candlestick series
        const candlestickSeries = chart.addCandlestickSeries({"upColor": "#26a69a", "downColor": "#ef5350", "borderVisible": false, "wickUpColor": "#26a69a", "wickDownColor": "#ef5350", "wickVisible": true});
        
        // Set data
        const formattedData = candlestickData.map(d => ({
            time: dateToTimestamp(d.time),
            open: d.open,
            high: d.high,
            low: d.low,
            close: d.close,
        }));
        
        candlestickSeries.setData(formattedData);
        
        // Add markers
        if (markersData.length > 0) {
            const formattedMarkers = markersData.map(m => ({
                time: dateToTimestamp(m.time),
                position: m.position,
                color: m.color,
                shape: m.shape,
                text: m.text,
            }));
            
            candlestickSeries.setMarkers(formattedMarkers);
        }
        
        // Add flagpole zone
        
        // Create flagpole zone
        if (timingInfo.start && timingInfo.end) {
            const flagpoleAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(76, 175, 80, 0.2)',
                bottomColor: 'rgba(76, 175, 80, 0.05)',
                lineColor: 'rgba(76, 175, 80, 0.5)',
                lineWidth: 2,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for flagpole period
            const startTime = dateToTimestamp(timingInfo.start);
            const endTime = dateToTimestamp(timingInfo.end);
            const flagpoleData = formattedData.filter(d => d.time >= startTime && d.time <= endTime);
            
            if (flagpoleData.length > 0) {
                const maxPrice = Math.max(...flagpoleData.map(d => d.high));
                const areaData = flagpoleData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                flagpoleAreaSeries.setData(areaData);
            }
        }
        
        // Create analysis window zone
        if (timingInfo.analysisEnd) {
            const analysisAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(33, 150, 243, 0.1)',
                bottomColor: 'rgba(33, 150, 243, 0.0)',
                lineColor: 'rgba(33, 150, 243, 0.3)',
                lineWidth: 1,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for analysis period
            const endTime = dateToTimestamp(timingInfo.end);
            const analysisEndTime = dateToTimestamp(timingInfo.analysisEnd);
            const analysisData = formattedData.filter(d => d.time >= endTime && d.time <= analysisEndTime);
            
            if (analysisData.length > 0) {
                const maxPrice = Math.max(...analysisData.map(d => d.high));
                const areaData = analysisData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                analysisAreaSeries.setData(areaData);
            }
        }
        
        
        // Add legend if forward test data available
        
        // Create legend for forward test data
        if (forwardTestData) {
            const legend = document.createElement('div');
            legend.style.cssText = `
            position: absolute;
            left: 12px;
            top: 12px;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        `;
            
            const isProfitable = forwardTestData.forwardReturn > 0;
            const signalColor = forwardTestData.signalType === 'BUY' ? 
                '#4CAF50' : '#F44336';
            const returnColor = isProfitable ? 
                '#4CAF50' : '#F44336';
            
            legend.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 6px; color: #333;">Forward Test Results</div>
                <div style="margin-bottom: 4px;">Signal: <span style="color: ${signalColor};font-weight:bold;">${forwardTestData.signalType}</span></div>
                <div style="margin-bottom: 4px;">Entry: <span style="font-weight:bold;">$${forwardTestData.entryPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Exit: <span style="font-weight:bold;">$${forwardTestData.exitPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Return: <span style="color: ${returnColor};font-weight:bold;">${(forwardTestData.forwardReturn * 100).toFixed(2)}%</span></div>
                <div>Window: <span style="font-weight:bold;">${forwardTestData.analysisWindow} minutes</span></div>
            `;
            
            chartElement.appendChild(legend);
        }
        
        
        // Handle window resize
        const handleResize = () => {
            const newWidth = chartElement.offsetWidth || 800;
            chart.applyOptions({ width: newWidth });
        };
        
        window.addEventListener('resize', handleResize);
        
        // Fit content and ensure time axis is visible
        chart.timeScale().fitContent();
        
        // Force time scale visibility
        chart.timeScale().applyOptions({
            visible: true,
            borderVisible: true,
            ticksVisible: true,
        });
        
        // Store chart instance for debugging
        window.chartInstance = chart;
        
        console.log('Chart initialized successfully');
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        initChart();
    }
})();
</script>

        </div>
    </div>
</body>
</html>