<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flagpole - TSLA - cut-TSLA, 2024-11-11</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../index.html">Home</a> /
            <a href="../experiments/TSLA_bayes_iter_29.html">
                TSLA - bayes_iter_29
            </a> /
            <span>Flagpole Details</span>
        </nav>

        
        <nav class="flagpole-navigation">
            <div class="nav-container">
                <a href="TSLA_iteration_ft_bayes_iter_29_iter_ft_bayes_iter_29_2024-11-08_5.html" class="nav-btn prev-btn">← Previous</a>
                <span class="nav-info">
                    Flagpole 567 of 600
                </span>
                <a href="TSLA_bayes_iter_29_cut-TSLA__2024-12-05_0.html" class="nav-btn next-btn">Next →</a>
            </div>
            <div class="nav-experiment-link">
                <a href="../experiments/TSLA_bayes_iter_29.html" class="nav-btn experiment-btn">
                    ← Back to TSLA - bayes_iter_29
                </a>
            </div>
        </nav>
        

        <header>
            <h1>Flagpole Analysis</h1>
            <div class="flagpole-header-info">
                <span class="ticker">TSLA</span>
                <span class="timestamp">cut-TSLA, 2024-11-11</span>
            </div>
        </header>

        <div class="flagpole-content">
            <div class="section">
                <h2>Price Chart</h2>
                <div id="chart" style="height: 660px; background: white; border: 1px solid #e1e1e1; padding: 10px; box-sizing: border-box; overflow: visible;"></div>
            </div>
            
            
<script>
// Chart initialization for flagpole visualization
(function() {
    'use strict';
    
    // Configuration
    const chartOptions = {"height": 640, "layout": {"backgroundColor": "white", "textColor": "#191919", "fontSize": 12, "fontFamily": "'Trebuchet MS', Roboto, Ubuntu, sans-serif"}, "grid": {"vertLines": {"color": "#f0f0f0", "style": 0, "visible": true}, "horzLines": {"color": "#f0f0f0", "style": 0, "visible": true}}, "timeScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "timeVisible": true, "secondsVisible": false, "tickMarkColor": "#2B2B43", "rightBarStaysOnScroll": true, "fixLeftEdge": false, "fixRightEdge": false, "ticksVisible": true, "minBarSpacing": 0.5, "barSpacing": 6, "height": 40}, "rightPriceScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "ticksVisible": true, "scaleMargins": {"top": 0.1, "bottom": 0.2}}, "crosshair": {"mode": 0, "vertLine": {"visible": true, "labelVisible": true}, "horzLine": {"visible": true, "labelVisible": true}}, "localization": {"locale": "en-US", "dateFormat": "yyyy-MM-dd"}};
    const candlestickData = [{"time": "2024-11-11 14:30:00", "open": 346.3, "high": 346.47, "low": 342.75, "close": 343.01, "volume": 4299378.0}, {"time": "2024-11-11 14:31:00", "open": 343.01, "high": 344.94, "low": 342.0, "close": 343.85, "volume": 1600827.0}, {"time": "2024-11-11 14:32:00", "open": 343.84, "high": 344.4, "low": 341.5, "close": 341.7217, "volume": 1300401.0}, {"time": "2024-11-11 14:33:00", "open": 341.725, "high": 349.25, "low": 341.65, "close": 346.8, "volume": 2759723.0}, {"time": "2024-11-11 14:34:00", "open": 346.9586, "high": 349.0, "low": 346.29, "close": 348.74, "volume": 1493210.0}, {"time": "2024-11-11 14:35:00", "open": 348.75, "high": 348.78, "low": 343.8, "close": 344.43, "volume": 1653683.0}, {"time": "2024-11-11 14:36:00", "open": 344.42, "high": 348.0, "low": 343.87, "close": 346.5024, "volume": 1153588.0}, {"time": "2024-11-11 14:37:00", "open": 346.63, "high": 347.71, "low": 346.59, "close": 346.96, "volume": 828431.0}, {"time": "2024-11-11 14:38:00", "open": 346.89, "high": 348.93, "low": 346.89, "close": 347.636, "volume": 1028441.0}, {"time": "2024-11-11 14:39:00", "open": 347.62, "high": 349.9, "low": 345.66, "close": 346.3351, "volume": 1795024.0}, {"time": "2024-11-11 14:40:00", "open": 346.22, "high": 349.69, "low": 345.9321, "close": 349.1711, "volume": 1099122.0}, {"time": "2024-11-11 14:41:00", "open": 349.17, "high": 350.0, "low": 348.85, "close": 349.3175, "volume": 1227448.0}, {"time": "2024-11-11 14:42:00", "open": 349.325, "high": 350.71, "low": 347.2, "close": 347.7001, "volume": 1972605.0}, {"time": "2024-11-11 14:43:00", "open": 347.845, "high": 348.32, "low": 346.44, "close": 346.4899, "volume": 880120.0}, {"time": "2024-11-11 14:44:00", "open": 346.48, "high": 346.69, "low": 340.97, "close": 341.6434, "volume": 2424836.0}, {"time": "2024-11-11 14:45:00", "open": 341.88, "high": 343.2899, "low": 340.91, "close": 341.1286, "volume": 1338070.0}, {"time": "2024-11-11 14:46:00", "open": 341.052449, "high": 344.46, "low": 341.0, "close": 343.36, "volume": 1058217.0}, {"time": "2024-11-11 14:47:00", "open": 343.449, "high": 346.3, "low": 342.85, "close": 345.34, "volume": 1025929.0}, {"time": "2024-11-11 14:48:00", "open": 345.21, "high": 345.4999, "low": 343.85, "close": 344.805, "volume": 751799.0}, {"time": "2024-11-11 14:49:00", "open": 344.805, "high": 345.69, "low": 343.01, "close": 343.3435, "volume": 719576.0}, {"time": "2024-11-11 14:50:00", "open": 343.5, "high": 344.69, "low": 342.86, "close": 343.88, "volume": 585192.0}, {"time": "2024-11-11 14:51:00", "open": 343.78, "high": 346.2299, "low": 342.9101, "close": 345.315, "volume": 760250.0}, {"time": "2024-11-11 14:52:00", "open": 345.349, "high": 346.19, "low": 343.952344, "close": 344.7, "volume": 556648.0}, {"time": "2024-11-11 14:53:00", "open": 344.64, "high": 347.75, "low": 344.6002, "close": 347.75, "volume": 1093763.0}, {"time": "2024-11-11 14:54:00", "open": 347.75, "high": 348.45, "low": 346.5563, "close": 347.295, "volume": 802040.0}, {"time": "2024-11-11 14:55:00", "open": 347.2001, "high": 347.64, "low": 346.1, "close": 347.4688, "volume": 512653.0}, {"time": "2024-11-11 14:56:00", "open": 347.4, "high": 347.5, "low": 345.7, "close": 346.46, "volume": 460809.0}, {"time": "2024-11-11 14:57:00", "open": 346.55, "high": 346.7, "low": 345.03, "close": 345.4136, "volume": 414051.0}, {"time": "2024-11-11 14:58:00", "open": 345.3, "high": 345.57, "low": 344.0, "close": 344.44, "volume": 488610.0}, {"time": "2024-11-11 14:59:00", "open": 344.53, "high": 345.36, "low": 343.7301, "close": 344.89, "volume": 541087.0}, {"time": "2024-11-11 15:00:00", "open": 344.89, "high": 345.1799, "low": 343.2, "close": 344.24, "volume": 568086.0}, {"time": "2024-11-11 15:01:00", "open": 344.3052, "high": 344.8, "low": 343.2, "close": 343.2307, "volume": 444128.0}, {"time": "2024-11-11 15:02:00", "open": 343.37, "high": 343.41, "low": 342.0, "close": 342.36, "volume": 778745.0}, {"time": "2024-11-11 15:03:00", "open": 342.36, "high": 343.198, "low": 341.73, "close": 342.5926, "volume": 683242.0}, {"time": "2024-11-11 15:04:00", "open": 342.55, "high": 343.4, "low": 339.9901, "close": 340.14, "volume": 1320099.0}, {"time": "2024-11-11 15:05:00", "open": 340.195, "high": 340.24, "low": 337.32, "close": 337.7505, "volume": 1686164.0}, {"time": "2024-11-11 15:06:00", "open": 337.76, "high": 340.9699, "low": 337.76, "close": 339.0477, "volume": 1020859.0}, {"time": "2024-11-11 15:07:00", "open": 338.9898, "high": 339.51, "low": 336.56, "close": 336.62, "volume": 951480.0}, {"time": "2024-11-11 15:08:00", "open": 336.6, "high": 339.9299, "low": 336.51, "close": 338.4499, "volume": 792534.0}, {"time": "2024-11-11 15:09:00", "open": 338.33, "high": 339.77, "low": 337.5775, "close": 337.9122, "volume": 606017.0}, {"time": "2024-11-11 15:10:00", "open": 337.8469, "high": 340.49, "low": 337.8001, "close": 340.3823, "volume": 603985.0}, {"time": "2024-11-11 15:11:00", "open": 340.458094, "high": 341.5799, "low": 340.0, "close": 340.59, "volume": 775360.0}, {"time": "2024-11-11 15:12:00", "open": 340.55, "high": 340.63, "low": 338.8201, "close": 339.4197, "volume": 501657.0}, {"time": "2024-11-11 15:13:00", "open": 339.32, "high": 342.66, "low": 339.29, "close": 342.64, "volume": 704896.0}, {"time": "2024-11-11 15:14:00", "open": 342.56, "high": 343.39, "low": 342.0001, "close": 343.185, "volume": 667644.0}, {"time": "2024-11-11 15:15:00", "open": 343.21, "high": 343.67, "low": 342.2713, "close": 343.21, "volume": 558571.0}, {"time": "2024-11-11 15:16:00", "open": 343.3, "high": 343.39, "low": 342.45, "close": 342.66, "volume": 380735.0}, {"time": "2024-11-11 15:17:00", "open": 342.66, "high": 343.68, "low": 341.33, "close": 342.2888, "volume": 562095.0}, {"time": "2024-11-11 15:18:00", "open": 342.2899, "high": 342.83, "low": 341.56, "close": 342.045, "volume": 378256.0}, {"time": "2024-11-11 15:19:00", "open": 342.025, "high": 342.2799, "low": 341.39, "close": 341.987, "volume": 368316.0}, {"time": "2024-11-11 15:20:00", "open": 341.9523, "high": 341.9523, "low": 340.29, "close": 341.03, "volume": 508240.0}, {"time": "2024-11-11 15:21:00", "open": 341.0238, "high": 342.27, "low": 340.3701, "close": 342.08, "volume": 445261.0}, {"time": "2024-11-11 15:22:00", "open": 342.16, "high": 342.89, "low": 341.25, "close": 342.76, "volume": 416498.0}, {"time": "2024-11-11 15:23:00", "open": 342.6924, "high": 345.49, "low": 342.52, "close": 345.28, "volume": 1134360.0}, {"time": "2024-11-11 15:24:00", "open": 345.23, "high": 346.6599, "low": 345.06, "close": 346.3718, "volume": 804799.0}, {"time": "2024-11-11 15:25:00", "open": 346.36, "high": 346.9899, "low": 345.8001, "close": 346.3689, "volume": 637339.0}, {"time": "2024-11-11 15:26:00", "open": 346.41, "high": 346.5792, "low": 345.08, "close": 345.3285, "volume": 503797.0}, {"time": "2024-11-11 15:27:00", "open": 345.4799, "high": 345.5799, "low": 344.2716, "close": 344.59, "volume": 424654.0}, {"time": "2024-11-11 15:28:00", "open": 344.635, "high": 345.85, "low": 344.5801, "close": 345.52, "volume": 340765.0}, {"time": "2024-11-11 15:29:00", "open": 345.605, "high": 345.85, "low": 344.64, "close": 344.9258, "volume": 307815.0}, {"time": "2024-11-11 15:30:00", "open": 344.86, "high": 345.5, "low": 343.2801, "close": 344.68, "volume": 474118.0}, {"time": "2024-11-11 15:31:00", "open": 344.73, "high": 346.25, "low": 344.06, "close": 345.89, "volume": 434955.0}, {"time": "2024-11-11 15:32:00", "open": 345.9362, "high": 346.5, "low": 345.18, "close": 346.38, "volume": 354850.0}, {"time": "2024-11-11 15:33:00", "open": 346.3355, "high": 346.43, "low": 345.66, "close": 346.0155, "volume": 286486.0}, {"time": "2024-11-11 15:34:00", "open": 346.04, "high": 347.42, "low": 345.9001, "close": 347.06, "volume": 603956.0}, {"time": "2024-11-11 15:35:00", "open": 347.07, "high": 348.32, "low": 346.69, "close": 348.1638, "volume": 704714.0}, {"time": "2024-11-11 15:36:00", "open": 348.15, "high": 348.23, "low": 346.52, "close": 346.865, "volume": 458916.0}, {"time": "2024-11-11 15:37:00", "open": 346.9599, "high": 347.2199, "low": 345.33, "close": 345.66, "volume": 461093.0}, {"time": "2024-11-11 15:38:00", "open": 345.6253, "high": 345.8679, "low": 344.49, "close": 345.86, "volume": 435407.0}, {"time": "2024-11-11 15:39:00", "open": 345.783, "high": 346.5, "low": 345.6, "close": 346.39, "volume": 325359.0}, {"time": "2024-11-11 15:40:00", "open": 346.37, "high": 346.49, "low": 345.46, "close": 345.5963, "volume": 297621.0}, {"time": "2024-11-11 15:41:00", "open": 345.55, "high": 345.8799, "low": 345.06, "close": 345.4499, "volume": 227144.0}, {"time": "2024-11-11 15:42:00", "open": 345.45, "high": 345.63, "low": 344.15, "close": 345.055, "volume": 393070.0}, {"time": "2024-11-11 15:43:00", "open": 345.01, "high": 345.88, "low": 344.8591, "close": 345.7, "volume": 254566.0}, {"time": "2024-11-11 15:44:00", "open": 345.705, "high": 346.8, "low": 345.7, "close": 346.32, "volume": 347210.0}, {"time": "2024-11-11 15:45:00", "open": 346.317, "high": 347.2, "low": 346.317, "close": 346.85, "volume": 455153.0}, {"time": "2024-11-11 15:46:00", "open": 346.8, "high": 347.26, "low": 346.5911, "close": 347.13, "volume": 313800.0}, {"time": "2024-11-11 15:47:00", "open": 347.08, "high": 347.26, "low": 346.22, "close": 346.715, "volume": 270639.0}, {"time": "2024-11-11 15:48:00", "open": 346.66, "high": 347.39, "low": 346.42, "close": 346.77, "volume": 364696.0}, {"time": "2024-11-11 15:49:00", "open": 346.79, "high": 347.8, "low": 346.6001, "close": 347.4947, "volume": 357794.0}, {"time": "2024-11-11 15:50:00", "open": 347.5437, "high": 348.65, "low": 346.17, "close": 346.67, "volume": 774572.0}, {"time": "2024-11-11 15:51:00", "open": 346.6961, "high": 347.3799, "low": 346.36, "close": 346.54, "volume": 301775.0}, {"time": "2024-11-11 15:52:00", "open": 346.61, "high": 348.19, "low": 346.61, "close": 348.07, "volume": 349061.0}, {"time": "2024-11-11 15:53:00", "open": 347.9101, "high": 349.21, "low": 347.9101, "close": 348.75, "volume": 805126.0}, {"time": "2024-11-11 15:54:00", "open": 348.6906, "high": 349.31, "low": 348.35, "close": 349.225, "volume": 430697.0}, {"time": "2024-11-11 15:55:00", "open": 349.2499, "high": 349.43, "low": 348.98, "close": 349.05, "volume": 433704.0}, {"time": "2024-11-11 15:56:00", "open": 349.03, "high": 349.09, "low": 348.38, "close": 348.92, "volume": 351970.0}, {"time": "2024-11-11 15:57:00", "open": 348.975, "high": 349.38, "low": 348.85, "close": 349.3399, "volume": 278083.0}, {"time": "2024-11-11 15:58:00", "open": 349.2762, "high": 349.39, "low": 348.7, "close": 349.2273, "volume": 305228.0}, {"time": "2024-11-11 15:59:00", "open": 349.265, "high": 349.3899, "low": 348.4, "close": 349.1999, "volume": 398216.0}, {"time": "2024-11-11 16:00:00", "open": 349.15, "high": 349.79, "low": 348.77, "close": 349.11, "volume": 487208.0}, {"time": "2024-11-11 16:01:00", "open": 349.145, "high": 349.33, "low": 348.1, "close": 348.57, "volume": 516898.0}, {"time": "2024-11-11 16:02:00", "open": 348.55, "high": 349.64, "low": 348.54, "close": 349.17, "volume": 358206.0}, {"time": "2024-11-11 16:03:00", "open": 349.1782, "high": 349.88, "low": 349.1762, "close": 349.7365, "volume": 506269.0}, {"time": "2024-11-11 16:04:00", "open": 349.74, "high": 349.755, "low": 349.3301, "close": 349.615, "volume": 332946.0}, {"time": "2024-11-11 16:05:00", "open": 349.66, "high": 349.85, "low": 349.065, "close": 349.5801, "volume": 379016.0}, {"time": "2024-11-11 16:06:00", "open": 349.5801, "high": 350.56, "low": 348.0, "close": 349.1039, "volume": 1397610.0}, {"time": "2024-11-11 16:07:00", "open": 349.17, "high": 349.75, "low": 348.8, "close": 349.4698, "volume": 311071.0}, {"time": "2024-11-11 16:08:00", "open": 349.47, "high": 349.96, "low": 349.29, "close": 349.82, "volume": 337986.0}, {"time": "2024-11-11 16:09:00", "open": 349.82, "high": 352.8, "low": 349.7, "close": 352.75, "volume": 1327203.0}, {"time": "2024-11-11 16:10:00", "open": 352.7156, "high": 353.7699, "low": 352.69, "close": 353.655, "volume": 972394.0}, {"time": "2024-11-11 16:11:00", "open": 353.7199, "high": 354.49, "low": 353.53, "close": 354.26, "volume": 876432.0}, {"time": "2024-11-11 16:12:00", "open": 354.26, "high": 354.37, "low": 351.5, "close": 352.1314, "volume": 864939.0}, {"time": "2024-11-11 16:13:00", "open": 352.16, "high": 353.6199, "low": 352.0402, "close": 353.27, "volume": 815340.0}, {"time": "2024-11-11 16:14:00", "open": 353.28, "high": 353.96, "low": 353.18, "close": 353.7647, "volume": 452601.0}, {"time": "2024-11-11 16:15:00", "open": 353.738, "high": 353.88, "low": 352.7301, "close": 353.57, "volume": 433938.0}, {"time": "2024-11-11 16:16:00", "open": 353.54, "high": 354.4859, "low": 352.8, "close": 353.726, "volume": 536414.0}, {"time": "2024-11-11 16:17:00", "open": 353.6819, "high": 354.29, "low": 353.61, "close": 353.7919, "volume": 409234.0}, {"time": "2024-11-11 16:18:00", "open": 353.83, "high": 354.7099, "low": 353.66, "close": 354.3118, "volume": 627895.0}, {"time": "2024-11-11 16:19:00", "open": 354.36, "high": 355.6499, "low": 354.01, "close": 355.631513, "volume": 837457.0}, {"time": "2024-11-11 16:20:00", "open": 355.49, "high": 355.54, "low": 354.51, "close": 355.38, "volume": 547543.0}, {"time": "2024-11-11 16:21:00", "open": 355.37, "high": 356.44, "low": 355.1601, "close": 355.99, "volume": 800535.0}, {"time": "2024-11-11 16:22:00", "open": 356.0, "high": 357.0, "low": 355.7, "close": 356.8773, "volume": 919027.0}, {"time": "2024-11-11 16:23:00", "open": 356.93, "high": 357.3, "low": 356.65, "close": 357.06, "volume": 641988.0}, {"time": "2024-11-11 16:24:00", "open": 357.09, "high": 357.3, "low": 356.6, "close": 356.7001, "volume": 712763.0}, {"time": "2024-11-11 16:25:00", "open": 356.7106, "high": 357.5, "low": 355.29, "close": 356.16, "volume": 869581.0}, {"time": "2024-11-11 16:26:00", "open": 356.14, "high": 356.33, "low": 355.36, "close": 356.0, "volume": 465259.0}, {"time": "2024-11-11 16:27:00", "open": 355.9954, "high": 357.4285, "low": 355.64, "close": 357.2695, "volume": 532205.0}, {"time": "2024-11-11 16:28:00", "open": 357.2699, "high": 357.27, "low": 355.26, "close": 355.39, "volume": 506069.0}, {"time": "2024-11-11 16:29:00", "open": 355.355, "high": 357.0, "low": 355.3001, "close": 356.7936, "volume": 509403.0}, {"time": "2024-11-11 16:30:00", "open": 356.7308, "high": 358.3, "low": 356.35, "close": 357.9891, "volume": 919743.0}, {"time": "2024-11-11 16:31:00", "open": 358.0199, "high": 358.64, "low": 357.42, "close": 357.8001, "volume": 789749.0}, {"time": "2024-11-11 16:32:00", "open": 357.8, "high": 358.105, "low": 355.66, "close": 355.715, "volume": 689140.0}, {"time": "2024-11-11 16:33:00", "open": 355.6872, "high": 355.7499, "low": 352.81, "close": 353.0213, "volume": 1134680.0}, {"time": "2024-11-11 16:34:00", "open": 353.11, "high": 354.29, "low": 352.3101, "close": 354.006, "volume": 1938277.0}, {"time": "2024-11-11 16:35:00", "open": 354.12, "high": 354.26, "low": 351.5101, "close": 352.5647, "volume": 833798.0}, {"time": "2024-11-11 16:36:00", "open": 352.63, "high": 353.8099, "low": 351.66, "close": 351.982, "volume": 558654.0}, {"time": "2024-11-11 16:37:00", "open": 352.045, "high": 352.8, "low": 351.66, "close": 352.32, "volume": 472469.0}, {"time": "2024-11-11 16:38:00", "open": 352.295, "high": 353.43, "low": 351.8301, "close": 352.43, "volume": 430391.0}, {"time": "2024-11-11 16:39:00", "open": 352.52, "high": 353.18, "low": 352.1, "close": 352.61, "volume": 314590.0}, {"time": "2024-11-11 16:40:00", "open": 352.5, "high": 352.6299, "low": 350.0701, "close": 351.4075, "volume": 750509.0}, {"time": "2024-11-11 16:41:00", "open": 351.56, "high": 351.96, "low": 349.3, "close": 349.75, "volume": 648261.0}, {"time": "2024-11-11 16:42:00", "open": 349.7499, "high": 349.9399, "low": 348.781, "close": 349.81, "volume": 662529.0}, {"time": "2024-11-11 16:43:00", "open": 349.825, "high": 351.37, "low": 349.02, "close": 351.3092, "volume": 585666.0}, {"time": "2024-11-11 16:44:00", "open": 351.2824, "high": 351.77, "low": 350.44, "close": 350.7199, "volume": 453919.0}, {"time": "2024-11-11 16:45:00", "open": 350.7, "high": 350.7155, "low": 348.92, "close": 349.69, "volume": 466786.0}, {"time": "2024-11-11 16:46:00", "open": 349.6481, "high": 349.8, "low": 348.38, "close": 348.83, "volume": 478781.0}, {"time": "2024-11-11 16:47:00", "open": 348.9153, "high": 349.33, "low": 348.16, "close": 348.44, "volume": 380833.0}, {"time": "2024-11-11 16:48:00", "open": 348.405, "high": 348.4099, "low": 346.1801, "close": 346.1901, "volume": 1017161.0}, {"time": "2024-11-11 16:49:00", "open": 346.19, "high": 347.4499, "low": 346.01, "close": 347.05, "volume": 555143.0}, {"time": "2024-11-11 16:50:00", "open": 347.13, "high": 347.68, "low": 346.41, "close": 346.5701, "volume": 376610.0}, {"time": "2024-11-11 16:51:00", "open": 346.606, "high": 348.9599, "low": 345.43, "close": 348.845, "volume": 825902.0}, {"time": "2024-11-11 16:52:00", "open": 348.85, "high": 348.9999, "low": 347.2601, "close": 347.81, "volume": 455169.0}, {"time": "2024-11-11 16:53:00", "open": 347.75, "high": 347.9, "low": 344.56, "close": 344.917, "volume": 846331.0}, {"time": "2024-11-11 16:54:00", "open": 344.905, "high": 345.97, "low": 344.29, "close": 345.87, "volume": 574457.0}, {"time": "2024-11-11 16:55:00", "open": 345.83, "high": 346.4, "low": 344.6, "close": 345.82, "volume": 449154.0}, {"time": "2024-11-11 16:56:00", "open": 345.75, "high": 345.92, "low": 343.0, "close": 343.688, "volume": 753719.0}, {"time": "2024-11-11 16:57:00", "open": 343.72, "high": 344.24, "low": 342.7501, "close": 343.7801, "volume": 566694.0}, {"time": "2024-11-11 16:58:00", "open": 343.86, "high": 345.9, "low": 343.67, "close": 345.745, "volume": 491405.0}, {"time": "2024-11-11 16:59:00", "open": 345.7906, "high": 346.38, "low": 345.17, "close": 345.86, "volume": 446978.0}, {"time": "2024-11-11 17:00:00", "open": 346.0, "high": 346.85, "low": 345.5201, "close": 346.5, "volume": 442475.0}, {"time": "2024-11-11 17:01:00", "open": 346.5, "high": 348.53, "low": 346.4501, "close": 348.2, "volume": 757131.0}, {"time": "2024-11-11 17:02:00", "open": 348.3, "high": 348.37, "low": 347.280212, "close": 347.88, "volume": 369994.0}, {"time": "2024-11-11 17:03:00", "open": 347.79, "high": 347.8693, "low": 346.25, "close": 346.3179, "volume": 363098.0}, {"time": "2024-11-11 17:04:00", "open": 346.4194, "high": 347.37, "low": 346.12, "close": 347.1099, "volume": 299616.0}, {"time": "2024-11-11 17:05:00", "open": 347.11, "high": 347.5999, "low": 346.5, "close": 346.8301, "volume": 295484.0}, {"time": "2024-11-11 17:06:00", "open": 346.905, "high": 347.44, "low": 346.65, "close": 347.3199, "volume": 248165.0}, {"time": "2024-11-11 17:07:00", "open": 347.285, "high": 348.23, "low": 347.25, "close": 347.85, "volume": 319288.0}, {"time": "2024-11-11 17:08:00", "open": 347.82, "high": 348.73, "low": 347.3, "close": 348.255, "volume": 347727.0}, {"time": "2024-11-11 17:09:00", "open": 348.14, "high": 348.3, "low": 347.2101, "close": 348.16, "volume": 247029.0}, {"time": "2024-11-11 17:10:00", "open": 348.22, "high": 348.39, "low": 346.76, "close": 347.3699, "volume": 293924.0}, {"time": "2024-11-11 17:11:00", "open": 347.28, "high": 347.28, "low": 345.6001, "close": 345.87, "volume": 385972.0}, {"time": "2024-11-11 17:12:00", "open": 346.0, "high": 346.4699, "low": 344.5602, "close": 344.685, "volume": 444393.0}, {"time": "2024-11-11 17:13:00", "open": 344.74, "high": 345.2, "low": 343.95, "close": 344.57, "volume": 439651.0}];
    const markersData = [{"time": "2024-11-11 15:07:00", "position": "aboveBar", "color": "#2196F3", "shape": "arrowDown", "text": "Pole Start\\n15:07"}, {"time": "2024-11-11 15:35:00", "position": "belowBar", "color": "#FF9800", "shape": "arrowUp", "text": "Pole End\\n28.0min\\n15:35"}, {"time": "2024-11-11 15:51:00", "position": "aboveBar", "color": "#9C27B0", "shape": "square", "text": "Convergence End\\n15:51"}, {"time": "2024-11-11 15:53:00", "position": "aboveBar", "color": "#4CAF50", "shape": "circle", "text": "End of Flagpole\\n\\n15:53"}, {"time": "2024-11-11 16:13:00", "position": "aboveBar", "color": "#F44336", "shape": "diamond", "text": "Analysis End\\n0.00%\\n16:13"}];
    const timingInfo = {"start": "2024-11-11 15:07:00", "end": "2024-11-11 15:53:00", "analysisEnd": "2024-11-11 16:13:00"};
    const forwardTestData = null;
    
    // Helper functions
    const dateToTimestamp = (dateStr) => {
        const [datePart, timePart] = dateStr.split(' ');
        const [year, month, day] = datePart.split('-').map(Number);
        const [hour, minute, second] = timePart.split(':').map(Number);
        const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute, second));
        return Math.floor(utcDate.getTime() / 1000);
    };
    
    const formatTime = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const hours = String(date.getUTCHours()).padStart(2, '0');
        const minutes = String(date.getUTCMinutes()).padStart(2, '0');
        return `${hours}:${minutes}`;
    };
    
    const formatDate = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    };
    
    // Wait for DOM and library
    const initChart = () => {
        const chartElement = document.getElementById('chart');
        
        if (!chartElement) {
            console.error('Chart element not found');
            return;
        }
        
        if (typeof window.LightweightCharts === 'undefined') {
            console.error('LightweightCharts library not loaded');
            chartElement.innerHTML = '<p style="color: red; padding: 20px;">Error: Chart library not loaded. Please refresh the page.</p>';
            return;
        }
        
        // Create chart with proper sizing
        const containerWidth = chartElement.offsetWidth || 800;
        chartOptions.width = containerWidth;
        
        // Height is already properly configured by chart layout system
        // No need to override here
        
        const chart = window.LightweightCharts.createChart(chartElement, chartOptions);
        
        // Custom time formatting for axis
        chart.applyOptions({
            timeScale: {
                tickMarkFormatter: (time, tickMarkType) => {
                    const date = new Date(time * 1000);
                    
                    // Different formats based on zoom level
                    switch(tickMarkType) {
                        case 0: // Year
                            return date.getUTCFullYear().toString();
                        case 1: // Month
                            return formatDate(time).substring(0, 7);
                        case 2: // Day
                            return formatDate(time).substring(5);
                        default: // Time
                            return formatTime(time);
                    }
                },
            },
            localization: {
                timeFormatter: (timestamp) => {
                    return `${formatDate(timestamp)} ${formatTime(timestamp)} UTC`;
                },
            },
        });
        
        // Create candlestick series
        const candlestickSeries = chart.addCandlestickSeries({"upColor": "#26a69a", "downColor": "#ef5350", "borderVisible": false, "wickUpColor": "#26a69a", "wickDownColor": "#ef5350", "wickVisible": true});
        
        // Set data
        const formattedData = candlestickData.map(d => ({
            time: dateToTimestamp(d.time),
            open: d.open,
            high: d.high,
            low: d.low,
            close: d.close,
        }));
        
        candlestickSeries.setData(formattedData);
        
        // Add markers
        if (markersData.length > 0) {
            const formattedMarkers = markersData.map(m => ({
                time: dateToTimestamp(m.time),
                position: m.position,
                color: m.color,
                shape: m.shape,
                text: m.text,
            }));
            
            candlestickSeries.setMarkers(formattedMarkers);
        }
        
        // Add flagpole zone
        
        // Create flagpole zone
        if (timingInfo.start && timingInfo.end) {
            const flagpoleAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(76, 175, 80, 0.2)',
                bottomColor: 'rgba(76, 175, 80, 0.05)',
                lineColor: 'rgba(76, 175, 80, 0.5)',
                lineWidth: 2,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for flagpole period
            const startTime = dateToTimestamp(timingInfo.start);
            const endTime = dateToTimestamp(timingInfo.end);
            const flagpoleData = formattedData.filter(d => d.time >= startTime && d.time <= endTime);
            
            if (flagpoleData.length > 0) {
                const maxPrice = Math.max(...flagpoleData.map(d => d.high));
                const areaData = flagpoleData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                flagpoleAreaSeries.setData(areaData);
            }
        }
        
        // Create analysis window zone
        if (timingInfo.analysisEnd) {
            const analysisAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(33, 150, 243, 0.1)',
                bottomColor: 'rgba(33, 150, 243, 0.0)',
                lineColor: 'rgba(33, 150, 243, 0.3)',
                lineWidth: 1,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for analysis period
            const endTime = dateToTimestamp(timingInfo.end);
            const analysisEndTime = dateToTimestamp(timingInfo.analysisEnd);
            const analysisData = formattedData.filter(d => d.time >= endTime && d.time <= analysisEndTime);
            
            if (analysisData.length > 0) {
                const maxPrice = Math.max(...analysisData.map(d => d.high));
                const areaData = analysisData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                analysisAreaSeries.setData(areaData);
            }
        }
        
        
        // Add legend if forward test data available
        
        // Create legend for forward test data
        if (forwardTestData) {
            const legend = document.createElement('div');
            legend.style.cssText = `
            position: absolute;
            left: 12px;
            top: 12px;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        `;
            
            const isProfitable = forwardTestData.forwardReturn > 0;
            const signalColor = forwardTestData.signalType === 'BUY' ? 
                '#4CAF50' : '#F44336';
            const returnColor = isProfitable ? 
                '#4CAF50' : '#F44336';
            
            legend.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 6px; color: #333;">Forward Test Results</div>
                <div style="margin-bottom: 4px;">Signal: <span style="color: ${signalColor};font-weight:bold;">${forwardTestData.signalType}</span></div>
                <div style="margin-bottom: 4px;">Entry: <span style="font-weight:bold;">$${forwardTestData.entryPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Exit: <span style="font-weight:bold;">$${forwardTestData.exitPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Return: <span style="color: ${returnColor};font-weight:bold;">${(forwardTestData.forwardReturn * 100).toFixed(2)}%</span></div>
                <div>Window: <span style="font-weight:bold;">${forwardTestData.analysisWindow} minutes</span></div>
            `;
            
            chartElement.appendChild(legend);
        }
        
        
        // Handle window resize
        const handleResize = () => {
            const newWidth = chartElement.offsetWidth || 800;
            chart.applyOptions({ width: newWidth });
        };
        
        window.addEventListener('resize', handleResize);
        
        // Fit content and ensure time axis is visible
        chart.timeScale().fitContent();
        
        // Force time scale visibility
        chart.timeScale().applyOptions({
            visible: true,
            borderVisible: true,
            ticksVisible: true,
        });
        
        // Store chart instance for debugging
        window.chartInstance = chart;
        
        console.log('Chart initialized successfully');
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        initChart();
    }
})();
</script>

        </div>
    </div>
</body>
</html>