<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Flagpole - TSLA - cut-TSLA, 2020-01-07</title>
    <link rel="stylesheet" href="../assets/styles.css">
    <script src="https://unpkg.com/lightweight-charts@4.1.0/dist/lightweight-charts.standalone.production.js"></script>
</head>
<body>
    <div class="container">
        <nav class="breadcrumb">
            <a href="../index.html">Home</a> /
            <a href="../experiments/TSLA_bayes_iter_29.html">
                TSLA - bayes_iter_29
            </a> /
            <span>Flagpole Details</span>
        </nav>

        
        <nav class="flagpole-navigation">
            <div class="nav-container">
                <a href="TSLA_bayes_iter_29_cut-TSLA__2019-12-16_0.html" class="nav-btn prev-btn">← Previous</a>
                <span class="nav-info">
                    Flagpole 247 of 600
                </span>
                <a href="TSLA_bayes_iter_29_cut-TSLA__2020-01-08_0.html" class="nav-btn next-btn">Next →</a>
            </div>
            <div class="nav-experiment-link">
                <a href="../experiments/TSLA_bayes_iter_29.html" class="nav-btn experiment-btn">
                    ← Back to TSLA - bayes_iter_29
                </a>
            </div>
        </nav>
        

        <header>
            <h1>Flagpole Analysis</h1>
            <div class="flagpole-header-info">
                <span class="ticker">TSLA</span>
                <span class="timestamp">cut-TSLA, 2020-01-07</span>
            </div>
        </header>

        <div class="flagpole-content">
            <div class="section">
                <h2>Price Chart</h2>
                <div id="chart" style="height: 660px; background: white; border: 1px solid #e1e1e1; padding: 10px; box-sizing: border-box; overflow: visible;"></div>
            </div>
            
            
<script>
// Chart initialization for flagpole visualization
(function() {
    'use strict';
    
    // Configuration
    const chartOptions = {"height": 640, "layout": {"backgroundColor": "white", "textColor": "#191919", "fontSize": 12, "fontFamily": "'Trebuchet MS', Roboto, Ubuntu, sans-serif"}, "grid": {"vertLines": {"color": "#f0f0f0", "style": 0, "visible": true}, "horzLines": {"color": "#f0f0f0", "style": 0, "visible": true}}, "timeScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "timeVisible": true, "secondsVisible": false, "tickMarkColor": "#2B2B43", "rightBarStaysOnScroll": true, "fixLeftEdge": false, "fixRightEdge": false, "ticksVisible": true, "minBarSpacing": 0.5, "barSpacing": 6, "height": 40}, "rightPriceScale": {"visible": true, "borderVisible": true, "borderColor": "#2B2B43", "ticksVisible": true, "scaleMargins": {"top": 0.1, "bottom": 0.2}}, "crosshair": {"mode": 0, "vertLine": {"visible": true, "labelVisible": true}, "horzLine": {"visible": true, "labelVisible": true}}, "localization": {"locale": "en-US", "dateFormat": "yyyy-MM-dd"}};
    const candlestickData = [{"time": "2020-01-07 15:31:00", "open": 30.6438, "high": 30.6553, "low": 30.612, "close": 30.625, "volume": 745665.0}, {"time": "2020-01-07 15:32:00", "open": 30.6267, "high": 30.6267, "low": 30.5453, "close": 30.58, "volume": 797145.0}, {"time": "2020-01-07 15:33:00", "open": 30.5833, "high": 30.5853, "low": 30.5587, "close": 30.566, "volume": 278460.0}, {"time": "2020-01-07 15:34:00", "open": 30.5686, "high": 30.5686, "low": 30.52, "close": 30.5247, "volume": 942015.0}, {"time": "2020-01-07 15:35:00", "open": 30.5247, "high": 30.5533, "low": 30.516, "close": 30.5327, "volume": 531825.0}, {"time": "2020-01-07 15:36:00", "open": 30.542, "high": 30.5553, "low": 30.5333, "close": 30.5464, "volume": 267645.0}, {"time": "2020-01-07 15:37:00", "open": 30.5533, "high": 30.6079, "low": 30.5507, "close": 30.586, "volume": 461955.0}, {"time": "2020-01-07 15:38:00", "open": 30.5853, "high": 30.62, "low": 30.5849, "close": 30.5894, "volume": 459075.0}, {"time": "2020-01-07 15:39:00", "open": 30.5928, "high": 30.6233, "low": 30.5667, "close": 30.6173, "volume": 429885.0}, {"time": "2020-01-07 15:40:00", "open": 30.6127, "high": 30.6138, "low": 30.582, "close": 30.5907, "volume": 237015.0}, {"time": "2020-01-07 15:41:00", "open": 30.594, "high": 30.5993, "low": 30.5539, "close": 30.5573, "volume": 367500.0}, {"time": "2020-01-07 15:42:00", "open": 30.5569, "high": 30.565, "low": 30.528, "close": 30.5411, "volume": 469365.0}, {"time": "2020-01-07 15:43:00", "open": 30.5533, "high": 30.588, "low": 30.5533, "close": 30.588, "volume": 328410.0}, {"time": "2020-01-07 15:44:00", "open": 30.5835, "high": 30.606, "low": 30.5783, "close": 30.5937, "volume": 352875.0}, {"time": "2020-01-07 15:45:00", "open": 30.5953, "high": 30.6333, "low": 30.582, "close": 30.5827, "volume": 749880.0}, {"time": "2020-01-07 15:46:00", "open": 30.592, "high": 30.6007, "low": 30.5573, "close": 30.5724, "volume": 356280.0}, {"time": "2020-01-07 15:47:00", "open": 30.584, "high": 30.6053, "low": 30.5629, "close": 30.6028, "volume": 208035.0}, {"time": "2020-01-07 15:48:00", "open": 30.6093, "high": 30.6093, "low": 30.5847, "close": 30.5967, "volume": 256905.0}, {"time": "2020-01-07 15:49:00", "open": 30.5923, "high": 30.596, "low": 30.5807, "close": 30.592, "volume": 241200.0}, {"time": "2020-01-07 15:50:00", "open": 30.59, "high": 30.6053, "low": 30.5787, "close": 30.6027, "volume": 306750.0}, {"time": "2020-01-07 15:51:00", "open": 30.5974, "high": 30.6053, "low": 30.5487, "close": 30.5528, "volume": 383985.0}, {"time": "2020-01-07 15:52:00", "open": 30.55, "high": 30.5572, "low": 30.5273, "close": 30.543, "volume": 501105.0}, {"time": "2020-01-07 15:53:00", "open": 30.5423, "high": 30.57, "low": 30.5393, "close": 30.57, "volume": 283725.0}, {"time": "2020-01-07 15:54:00", "open": 30.5667, "high": 30.578, "low": 30.562, "close": 30.5673, "volume": 307185.0}, {"time": "2020-01-07 15:55:00", "open": 30.57, "high": 30.5753, "low": 30.544, "close": 30.5613, "volume": 124170.0}, {"time": "2020-01-07 15:56:00", "open": 30.5553, "high": 30.5767, "low": 30.5547, "close": 30.5686, "volume": 142545.0}, {"time": "2020-01-07 15:57:00", "open": 30.57, "high": 30.578, "low": 30.5553, "close": 30.5667, "volume": 230835.0}, {"time": "2020-01-07 15:58:00", "open": 30.562, "high": 30.562, "low": 30.5253, "close": 30.538, "volume": 460455.0}, {"time": "2020-01-07 15:59:00", "open": 30.526, "high": 30.5327, "low": 30.5047, "close": 30.5247, "volume": 545010.0}, {"time": "2020-01-07 16:00:00", "open": 30.5299, "high": 30.5299, "low": 30.48, "close": 30.4873, "volume": 506550.0}, {"time": "2020-01-07 16:01:00", "open": 30.4853, "high": 30.516, "low": 30.45, "close": 30.504, "volume": 843795.0}, {"time": "2020-01-07 16:02:00", "open": 30.4947, "high": 30.5336, "low": 30.49, "close": 30.5327, "volume": 386025.0}, {"time": "2020-01-07 16:03:00", "open": 30.5247, "high": 30.5647, "low": 30.5247, "close": 30.534, "volume": 848865.0}, {"time": "2020-01-07 16:04:00", "open": 30.54, "high": 30.5827, "low": 30.5367, "close": 30.5777, "volume": 412860.0}, {"time": "2020-01-07 16:05:00", "open": 30.5778, "high": 30.6119, "low": 30.556, "close": 30.6059, "volume": 577425.0}, {"time": "2020-01-07 16:06:00", "open": 30.6039, "high": 30.6133, "low": 30.5773, "close": 30.5936, "volume": 431625.0}, {"time": "2020-01-07 16:07:00", "open": 30.5984, "high": 30.6133, "low": 30.5827, "close": 30.606, "volume": 528675.0}, {"time": "2020-01-07 16:08:00", "open": 30.6009, "high": 30.654, "low": 30.6009, "close": 30.6367, "volume": 863385.0}, {"time": "2020-01-07 16:09:00", "open": 30.646, "high": 30.6727, "low": 30.6275, "close": 30.6587, "volume": 906780.0}, {"time": "2020-01-07 16:10:00", "open": 30.6553, "high": 30.6953, "low": 30.6553, "close": 30.671, "volume": 729285.0}, {"time": "2020-01-07 16:11:00", "open": 30.6667, "high": 30.6953, "low": 30.6547, "close": 30.6813, "volume": 626175.0}, {"time": "2020-01-07 16:12:00", "open": 30.69, "high": 30.7193, "low": 30.6833, "close": 30.71, "volume": 689325.0}, {"time": "2020-01-07 16:13:00", "open": 30.7107, "high": 30.724, "low": 30.67, "close": 30.6817, "volume": 499020.0}, {"time": "2020-01-07 16:14:00", "open": 30.6798, "high": 30.6987, "low": 30.6707, "close": 30.6913, "volume": 377490.0}, {"time": "2020-01-07 16:15:00", "open": 30.6912, "high": 30.709, "low": 30.6912, "close": 30.7034, "volume": 291315.0}, {"time": "2020-01-07 16:16:00", "open": 30.705, "high": 30.7087, "low": 30.6661, "close": 30.6727, "volume": 463290.0}, {"time": "2020-01-07 16:17:00", "open": 30.6717, "high": 30.6727, "low": 30.6507, "close": 30.6587, "volume": 361695.0}, {"time": "2020-01-07 16:18:00", "open": 30.656, "high": 30.6887, "low": 30.6487, "close": 30.678, "volume": 333120.0}, {"time": "2020-01-07 16:19:00", "open": 30.678, "high": 30.7, "low": 30.6667, "close": 30.6941, "volume": 242325.0}, {"time": "2020-01-07 16:20:00", "open": 30.6943, "high": 30.708, "low": 30.684, "close": 30.7, "volume": 326670.0}, {"time": "2020-01-07 16:21:00", "open": 30.699, "high": 30.722, "low": 30.6979, "close": 30.712, "volume": 357855.0}, {"time": "2020-01-07 16:22:00", "open": 30.7125, "high": 30.716, "low": 30.688, "close": 30.7063, "volume": 293280.0}, {"time": "2020-01-07 16:23:00", "open": 30.7062, "high": 30.7327, "low": 30.7062, "close": 30.7307, "volume": 304845.0}, {"time": "2020-01-07 16:24:00", "open": 30.7287, "high": 30.758, "low": 30.7073, "close": 30.7486, "volume": 890025.0}, {"time": "2020-01-07 16:25:00", "open": 30.7447, "high": 30.75, "low": 30.7061, "close": 30.7197, "volume": 381210.0}, {"time": "2020-01-07 16:26:00", "open": 30.728, "high": 30.7333, "low": 30.7094, "close": 30.7303, "volume": 245760.0}, {"time": "2020-01-07 16:27:00", "open": 30.7287, "high": 30.73, "low": 30.7127, "close": 30.7181, "volume": 148740.0}, {"time": "2020-01-07 16:28:00", "open": 30.7174, "high": 30.7325, "low": 30.6933, "close": 30.713, "volume": 275310.0}, {"time": "2020-01-07 16:29:00", "open": 30.716, "high": 30.716, "low": 30.6893, "close": 30.7053, "volume": 292830.0}, {"time": "2020-01-07 16:30:00", "open": 30.71, "high": 30.7167, "low": 30.6827, "close": 30.7133, "volume": 356790.0}, {"time": "2020-01-07 16:31:00", "open": 30.7213, "high": 30.7213, "low": 30.6828, "close": 30.6887, "volume": 202815.0}, {"time": "2020-01-07 16:32:00", "open": 30.686, "high": 30.694, "low": 30.6627, "close": 30.6887, "volume": 449715.0}, {"time": "2020-01-07 16:33:00", "open": 30.6827, "high": 30.7253, "low": 30.6827, "close": 30.7127, "volume": 418665.0}, {"time": "2020-01-07 16:34:00", "open": 30.7107, "high": 30.7247, "low": 30.7021, "close": 30.7043, "volume": 203295.0}, {"time": "2020-01-07 16:35:00", "open": 30.7037, "high": 30.7096, "low": 30.6907, "close": 30.6907, "volume": 242955.0}, {"time": "2020-01-07 16:36:00", "open": 30.6907, "high": 30.7053, "low": 30.6907, "close": 30.702, "volume": 169095.0}, {"time": "2020-01-07 16:37:00", "open": 30.697, "high": 30.7033, "low": 30.667, "close": 30.674, "volume": 279450.0}, {"time": "2020-01-07 16:38:00", "open": 30.6725, "high": 30.6873, "low": 30.6673, "close": 30.6753, "volume": 293655.0}, {"time": "2020-01-07 16:39:00", "open": 30.68, "high": 30.7, "low": 30.6763, "close": 30.6953, "volume": 148335.0}, {"time": "2020-01-07 16:40:00", "open": 30.6953, "high": 30.72, "low": 30.692, "close": 30.72, "volume": 346755.0}, {"time": "2020-01-07 16:41:00", "open": 30.7201, "high": 30.7297, "low": 30.7167, "close": 30.7286, "volume": 314835.0}, {"time": "2020-01-07 16:42:00", "open": 30.73, "high": 30.7547, "low": 30.7252, "close": 30.7413, "volume": 720855.0}, {"time": "2020-01-07 16:43:00", "open": 30.742, "high": 30.742, "low": 30.7213, "close": 30.7333, "volume": 142965.0}, {"time": "2020-01-07 16:44:00", "open": 30.7343, "high": 30.7442, "low": 30.6853, "close": 30.6937, "volume": 312540.0}, {"time": "2020-01-07 16:45:00", "open": 30.6943, "high": 30.7107, "low": 30.6853, "close": 30.7096, "volume": 179355.0}, {"time": "2020-01-07 16:46:00", "open": 30.7088, "high": 30.7122, "low": 30.69, "close": 30.6973, "volume": 210045.0}, {"time": "2020-01-07 16:47:00", "open": 30.6987, "high": 30.7027, "low": 30.678, "close": 30.682, "volume": 357825.0}, {"time": "2020-01-07 16:48:00", "open": 30.688, "high": 30.7083, "low": 30.6873, "close": 30.6967, "volume": 217680.0}, {"time": "2020-01-07 16:49:00", "open": 30.6987, "high": 30.7407, "low": 30.6987, "close": 30.7194, "volume": 435105.0}, {"time": "2020-01-07 16:50:00", "open": 30.7213, "high": 30.7303, "low": 30.7033, "close": 30.7267, "volume": 260550.0}, {"time": "2020-01-07 16:51:00", "open": 30.7293, "high": 30.7293, "low": 30.7139, "close": 30.7212, "volume": 121455.0}, {"time": "2020-01-07 16:52:00", "open": 30.724, "high": 30.7271, "low": 30.7, "close": 30.7047, "volume": 239445.0}, {"time": "2020-01-07 16:53:00", "open": 30.7047, "high": 30.7116, "low": 30.6933, "close": 30.7116, "volume": 217575.0}, {"time": "2020-01-07 16:54:00", "open": 30.708, "high": 30.7167, "low": 30.6968, "close": 30.704, "volume": 174555.0}, {"time": "2020-01-07 16:55:00", "open": 30.7061, "high": 30.712, "low": 30.688, "close": 30.6933, "volume": 221415.0}, {"time": "2020-01-07 16:56:00", "open": 30.69, "high": 30.6973, "low": 30.634, "close": 30.6591, "volume": 1054770.0}, {"time": "2020-01-07 16:57:00", "open": 30.672, "high": 30.6993, "low": 30.6653, "close": 30.6808, "volume": 403425.0}, {"time": "2020-01-07 16:58:00", "open": 30.6813, "high": 30.724, "low": 30.6806, "close": 30.7022, "volume": 322515.0}, {"time": "2020-01-07 16:59:00", "open": 30.7047, "high": 30.7147, "low": 30.694, "close": 30.7091, "volume": 149535.0}, {"time": "2020-01-07 17:00:00", "open": 30.7102, "high": 30.7333, "low": 30.704, "close": 30.7273, "volume": 512145.0}, {"time": "2020-01-07 17:01:00", "open": 30.7239, "high": 30.746, "low": 30.7193, "close": 30.746, "volume": 423075.0}, {"time": "2020-01-07 17:02:00", "open": 30.7444, "high": 30.786, "low": 30.744, "close": 30.7853, "volume": 1165770.0}, {"time": "2020-01-07 17:03:00", "open": 30.7853, "high": 30.8433, "low": 30.7793, "close": 30.84, "volume": 1948320.0}, {"time": "2020-01-07 17:04:00", "open": 30.8404, "high": 30.848, "low": 30.794, "close": 30.8027, "volume": 846405.0}, {"time": "2020-01-07 17:05:00", "open": 30.8032, "high": 30.8347, "low": 30.802, "close": 30.8241, "volume": 795360.0}, {"time": "2020-01-07 17:06:00", "open": 30.828, "high": 30.85, "low": 30.812, "close": 30.8475, "volume": 1101885.0}, {"time": "2020-01-07 17:07:00", "open": 30.8461, "high": 30.8533, "low": 30.8267, "close": 30.8443, "volume": 570975.0}, {"time": "2020-01-07 17:08:00", "open": 30.8393, "high": 30.8417, "low": 30.812, "close": 30.8143, "volume": 678675.0}, {"time": "2020-01-07 17:09:00", "open": 30.8166, "high": 30.8353, "low": 30.8142, "close": 30.8353, "volume": 266895.0}, {"time": "2020-01-07 17:10:00", "open": 30.8323, "high": 30.8407, "low": 30.783, "close": 30.8047, "volume": 769695.0}, {"time": "2020-01-07 17:11:00", "open": 30.7973, "high": 30.8402, "low": 30.796, "close": 30.836, "volume": 633030.0}, {"time": "2020-01-07 17:12:00", "open": 30.8333, "high": 30.8587, "low": 30.826, "close": 30.8574, "volume": 1141620.0}, {"time": "2020-01-07 17:13:00", "open": 30.858, "high": 30.9049, "low": 30.8553, "close": 30.9031, "volume": 1371420.0}, {"time": "2020-01-07 17:14:00", "open": 30.9067, "high": 30.9287, "low": 30.8954, "close": 30.9215, "volume": 1322820.0}, {"time": "2020-01-07 17:15:00", "open": 30.9238, "high": 30.9393, "low": 30.9022, "close": 30.9141, "volume": 1145295.0}, {"time": "2020-01-07 17:16:00", "open": 30.918, "high": 30.9333, "low": 30.9087, "close": 30.9225, "volume": 664500.0}, {"time": "2020-01-07 17:17:00", "open": 30.9222, "high": 30.9273, "low": 30.9093, "close": 30.9233, "volume": 551175.0}, {"time": "2020-01-07 17:18:00", "open": 30.9193, "high": 30.9667, "low": 30.914, "close": 30.9575, "volume": 997500.0}, {"time": "2020-01-07 17:19:00", "open": 30.9599, "high": 30.9673, "low": 30.9387, "close": 30.9434, "volume": 828045.0}, {"time": "2020-01-07 17:20:00", "open": 30.9426, "high": 30.9556, "low": 30.854, "close": 30.8675, "volume": 1076790.0}, {"time": "2020-01-07 17:21:00", "open": 30.8695, "high": 30.9093, "low": 30.8684, "close": 30.9093, "volume": 553395.0}, {"time": "2020-01-07 17:22:00", "open": 30.9027, "high": 30.92, "low": 30.8847, "close": 30.9169, "volume": 389970.0}, {"time": "2020-01-07 17:23:00", "open": 30.9199, "high": 30.9233, "low": 30.904, "close": 30.9144, "volume": 387660.0}, {"time": "2020-01-07 17:24:00", "open": 30.91, "high": 30.914, "low": 30.8607, "close": 30.8617, "volume": 604770.0}, {"time": "2020-01-07 17:25:00", "open": 30.8607, "high": 30.8792, "low": 30.816, "close": 30.8408, "volume": 964365.0}, {"time": "2020-01-07 17:26:00", "open": 30.837, "high": 30.8457, "low": 30.828, "close": 30.8333, "volume": 407610.0}, {"time": "2020-01-07 17:27:00", "open": 30.8368, "high": 30.8633, "low": 30.8333, "close": 30.8597, "volume": 414315.0}, {"time": "2020-01-07 17:28:00", "open": 30.8586, "high": 30.8987, "low": 30.8586, "close": 30.8981, "volume": 352050.0}, {"time": "2020-01-07 17:29:00", "open": 30.8955, "high": 30.914, "low": 30.89, "close": 30.9072, "volume": 387045.0}, {"time": "2020-01-07 17:30:00", "open": 30.9073, "high": 30.9313, "low": 30.9073, "close": 30.9291, "volume": 474570.0}, {"time": "2020-01-07 17:31:00", "open": 30.9327, "high": 30.9364, "low": 30.8853, "close": 30.8977, "volume": 383130.0}, {"time": "2020-01-07 17:32:00", "open": 30.9, "high": 30.9133, "low": 30.9, "close": 30.9073, "volume": 253455.0}, {"time": "2020-01-07 17:33:00", "open": 30.902, "high": 30.916, "low": 30.8927, "close": 30.898, "volume": 231840.0}, {"time": "2020-01-07 17:34:00", "open": 30.8947, "high": 30.9129, "low": 30.8933, "close": 30.9113, "volume": 217275.0}, {"time": "2020-01-07 17:35:00", "open": 30.9121, "high": 30.9567, "low": 30.9121, "close": 30.952, "volume": 456210.0}, {"time": "2020-01-07 17:36:00", "open": 30.9567, "high": 30.9727, "low": 30.9247, "close": 30.9411, "volume": 754890.0}, {"time": "2020-01-07 17:37:00", "open": 30.9413, "high": 30.9433, "low": 30.9134, "close": 30.9293, "volume": 364020.0}, {"time": "2020-01-07 17:38:00", "open": 30.9237, "high": 30.9647, "low": 30.919, "close": 30.9647, "volume": 377340.0}, {"time": "2020-01-07 17:39:00", "open": 30.9629, "high": 30.98, "low": 30.9553, "close": 30.9653, "volume": 608340.0}, {"time": "2020-01-07 17:40:00", "open": 30.97, "high": 30.9773, "low": 30.956, "close": 30.9673, "volume": 390270.0}, {"time": "2020-01-07 17:41:00", "open": 30.9787, "high": 30.9787, "low": 30.9333, "close": 30.9393, "volume": 512415.0}, {"time": "2020-01-07 17:42:00", "open": 30.934, "high": 30.942, "low": 30.9136, "close": 30.916, "volume": 600435.0}, {"time": "2020-01-07 17:43:00", "open": 30.9167, "high": 30.9233, "low": 30.9053, "close": 30.9127, "volume": 271140.0}, {"time": "2020-01-07 17:44:00", "open": 30.914, "high": 30.9273, "low": 30.9013, "close": 30.906, "volume": 258510.0}, {"time": "2020-01-07 17:45:00", "open": 30.9067, "high": 30.9167, "low": 30.9, "close": 30.91, "volume": 281625.0}, {"time": "2020-01-07 17:46:00", "open": 30.91, "high": 30.9577, "low": 30.91, "close": 30.9513, "volume": 339315.0}, {"time": "2020-01-07 17:47:00", "open": 30.9547, "high": 30.9547, "low": 30.9107, "close": 30.9193, "volume": 340920.0}, {"time": "2020-01-07 17:48:00", "open": 30.9163, "high": 30.932, "low": 30.9107, "close": 30.924, "volume": 158040.0}, {"time": "2020-01-07 17:49:00", "open": 30.926, "high": 30.9453, "low": 30.9253, "close": 30.9325, "volume": 225465.0}, {"time": "2020-01-07 17:50:00", "open": 30.93, "high": 30.9537, "low": 30.93, "close": 30.9437, "volume": 296415.0}, {"time": "2020-01-07 17:51:00", "open": 30.9429, "high": 30.968, "low": 30.9353, "close": 30.9513, "volume": 443400.0}, {"time": "2020-01-07 17:52:00", "open": 30.9518, "high": 30.9614, "low": 30.9513, "close": 30.9586, "volume": 153750.0}, {"time": "2020-01-07 17:53:00", "open": 30.952, "high": 30.9833, "low": 30.952, "close": 30.9809, "volume": 359580.0}, {"time": "2020-01-07 17:54:00", "open": 30.9793, "high": 30.9927, "low": 30.9713, "close": 30.9791, "volume": 827535.0}, {"time": "2020-01-07 17:55:00", "open": 30.9813, "high": 30.986, "low": 30.9707, "close": 30.9787, "volume": 319080.0}, {"time": "2020-01-07 17:56:00", "open": 30.9753, "high": 30.9833, "low": 30.9733, "close": 30.978, "volume": 204960.0}, {"time": "2020-01-07 17:57:00", "open": 30.9774, "high": 30.9793, "low": 30.96, "close": 30.9693, "volume": 248985.0}, {"time": "2020-01-07 17:58:00", "open": 30.9747, "high": 30.9747, "low": 30.9613, "close": 30.9627, "volume": 249120.0}, {"time": "2020-01-07 17:59:00", "open": 30.966, "high": 30.969, "low": 30.9547, "close": 30.9653, "volume": 171675.0}, {"time": "2020-01-07 18:00:00", "open": 30.9627, "high": 30.976, "low": 30.9627, "close": 30.974, "volume": 98325.0}, {"time": "2020-01-07 18:01:00", "open": 30.976, "high": 31.0167, "low": 30.976, "close": 31.01, "volume": 1354185.0}, {"time": "2020-01-07 18:02:00", "open": 31.0132, "high": 31.0533, "low": 31.0114, "close": 31.0166, "volume": 973635.0}, {"time": "2020-01-07 18:03:00", "open": 31.018, "high": 31.0533, "low": 31.0147, "close": 31.0493, "volume": 681315.0}, {"time": "2020-01-07 18:04:00", "open": 31.044, "high": 31.1107, "low": 31.0373, "close": 31.0903, "volume": 1545255.0}, {"time": "2020-01-07 18:05:00", "open": 31.0973, "high": 31.1113, "low": 31.0773, "close": 31.1064, "volume": 1042515.0}, {"time": "2020-01-07 18:06:00", "open": 31.1067, "high": 31.112, "low": 31.06, "close": 31.0655, "volume": 1044615.0}, {"time": "2020-01-07 18:07:00", "open": 31.0573, "high": 31.1087, "low": 31.0553, "close": 31.1075, "volume": 521940.0}, {"time": "2020-01-07 18:08:00", "open": 31.104, "high": 31.1487, "low": 31.1012, "close": 31.1307, "volume": 1310640.0}, {"time": "2020-01-07 18:09:00", "open": 31.132, "high": 31.1366, "low": 31.1053, "close": 31.1283, "volume": 687525.0}, {"time": "2020-01-07 18:10:00", "open": 31.1283, "high": 31.132, "low": 31.1167, "close": 31.1283, "volume": 490575.0}, {"time": "2020-01-07 18:11:00", "open": 31.1267, "high": 31.1333, "low": 31.1017, "close": 31.1203, "volume": 554955.0}, {"time": "2020-01-07 18:12:00", "open": 31.118, "high": 31.15, "low": 31.1, "close": 31.1053, "volume": 958200.0}, {"time": "2020-01-07 18:13:00", "open": 31.1083, "high": 31.146, "low": 31.1053, "close": 31.146, "volume": 438210.0}, {"time": "2020-01-07 18:14:00", "open": 31.142, "high": 31.1867, "low": 31.1393, "close": 31.1793, "volume": 1003830.0}, {"time": "2020-01-07 18:15:00", "open": 31.1847, "high": 31.2187, "low": 31.1777, "close": 31.2136, "volume": 1486530.0}, {"time": "2020-01-07 18:16:00", "open": 31.2126, "high": 31.2407, "low": 31.2, "close": 31.2152, "volume": 1258635.0}, {"time": "2020-01-07 18:17:00", "open": 31.2133, "high": 31.2731, "low": 31.212, "close": 31.271, "volume": 1015035.0}, {"time": "2020-01-07 18:18:00", "open": 31.2704, "high": 31.3119, "low": 31.2627, "close": 31.3029, "volume": 1686090.0}, {"time": "2020-01-07 18:19:00", "open": 31.3033, "high": 31.3153, "low": 31.2513, "close": 31.2581, "volume": 1651275.0}, {"time": "2020-01-07 18:20:00", "open": 31.2573, "high": 31.2953, "low": 31.2393, "close": 31.2827, "volume": 773085.0}, {"time": "2020-01-07 18:21:00", "open": 31.2773, "high": 31.2833, "low": 31.2167, "close": 31.2293, "volume": 879495.0}, {"time": "2020-01-07 18:22:00", "open": 31.2257, "high": 31.2369, "low": 31.2007, "close": 31.2124, "volume": 879660.0}, {"time": "2020-01-07 18:23:00", "open": 31.216, "high": 31.2447, "low": 31.2137, "close": 31.2433, "volume": 687360.0}, {"time": "2020-01-07 18:24:00", "open": 31.2384, "high": 31.2432, "low": 31.2013, "close": 31.21, "volume": 431490.0}, {"time": "2020-01-07 18:25:00", "open": 31.2082, "high": 31.2113, "low": 31.1653, "close": 31.1663, "volume": 863940.0}, {"time": "2020-01-07 18:26:00", "open": 31.1673, "high": 31.176, "low": 31.1333, "close": 31.1381, "volume": 782400.0}, {"time": "2020-01-07 18:27:00", "open": 31.1393, "high": 31.1927, "low": 31.138, "close": 31.1857, "volume": 470730.0}, {"time": "2020-01-07 18:28:00", "open": 31.1857, "high": 31.214, "low": 31.1767, "close": 31.1773, "volume": 637365.0}, {"time": "2020-01-07 18:29:00", "open": 31.1747, "high": 31.1877, "low": 31.1633, "close": 31.1739, "volume": 278430.0}, {"time": "2020-01-07 18:30:00", "open": 31.1718, "high": 31.218, "low": 31.164, "close": 31.2154, "volume": 422115.0}, {"time": "2020-01-07 18:31:00", "open": 31.2127, "high": 31.254, "low": 31.2115, "close": 31.2495, "volume": 644520.0}, {"time": "2020-01-07 18:32:00", "open": 31.2527, "high": 31.2893, "low": 31.25, "close": 31.2783, "volume": 725760.0}, {"time": "2020-01-07 18:33:00", "open": 31.2752, "high": 31.277, "low": 31.218, "close": 31.2433, "volume": 567990.0}, {"time": "2020-01-07 18:34:00", "open": 31.2447, "high": 31.2467, "low": 31.1933, "close": 31.213, "volume": 813720.0}, {"time": "2020-01-07 18:35:00", "open": 31.2188, "high": 31.2401, "low": 31.2113, "close": 31.2254, "volume": 393105.0}, {"time": "2020-01-07 18:36:00", "open": 31.2233, "high": 31.2273, "low": 31.2, "close": 31.2119, "volume": 298560.0}, {"time": "2020-01-07 18:37:00", "open": 31.2093, "high": 31.262, "low": 31.208, "close": 31.2567, "volume": 435930.0}, {"time": "2020-01-07 18:38:00", "open": 31.25, "high": 31.25, "low": 31.2173, "close": 31.2173, "volume": 403125.0}, {"time": "2020-01-07 18:39:00", "open": 31.2176, "high": 31.2506, "low": 31.2107, "close": 31.2293, "volume": 299490.0}, {"time": "2020-01-07 18:40:00", "open": 31.2244, "high": 31.2387, "low": 31.2107, "close": 31.2279, "volume": 205530.0}, {"time": "2020-01-07 18:41:00", "open": 31.2348, "high": 31.2393, "low": 31.2187, "close": 31.2267, "volume": 238380.0}, {"time": "2020-01-07 18:42:00", "open": 31.23, "high": 31.2427, "low": 31.2117, "close": 31.22, "volume": 413100.0}, {"time": "2020-01-07 18:43:00", "open": 31.2207, "high": 31.2227, "low": 31.174, "close": 31.1904, "volume": 522795.0}, {"time": "2020-01-07 18:44:00", "open": 31.1827, "high": 31.1993, "low": 31.1533, "close": 31.1533, "volume": 458490.0}, {"time": "2020-01-07 18:45:00", "open": 31.1533, "high": 31.1867, "low": 31.1467, "close": 31.1849, "volume": 464520.0}, {"time": "2020-01-07 18:46:00", "open": 31.192, "high": 31.192, "low": 31.1613, "close": 31.1818, "volume": 455355.0}, {"time": "2020-01-07 18:47:00", "open": 31.1832, "high": 31.2185, "low": 31.176, "close": 31.2121, "volume": 284505.0}, {"time": "2020-01-07 18:48:00", "open": 31.212, "high": 31.2475, "low": 31.2105, "close": 31.24, "volume": 641670.0}, {"time": "2020-01-07 18:49:00", "open": 31.2439, "high": 31.2507, "low": 31.2273, "close": 31.24, "volume": 374550.0}, {"time": "2020-01-07 18:50:00", "open": 31.234, "high": 31.2408, "low": 31.2027, "close": 31.2133, "volume": 280395.0}, {"time": "2020-01-07 18:51:00", "open": 31.2153, "high": 31.224, "low": 31.2113, "close": 31.22, "volume": 62730.0}, {"time": "2020-01-07 18:52:00", "open": 31.2235, "high": 31.2867, "low": 31.221, "close": 31.2783, "volume": 1156215.0}, {"time": "2020-01-07 18:53:00", "open": 31.2769, "high": 31.2769, "low": 31.2, "close": 31.2047, "volume": 606795.0}, {"time": "2020-01-07 18:54:00", "open": 31.2058, "high": 31.2413, "low": 31.2007, "close": 31.2413, "volume": 520605.0}, {"time": "2020-01-07 18:55:00", "open": 31.2377, "high": 31.28, "low": 31.2377, "close": 31.2727, "volume": 427980.0}, {"time": "2020-01-07 18:56:00", "open": 31.275, "high": 31.2833, "low": 31.2598, "close": 31.2755, "volume": 447375.0}, {"time": "2020-01-07 18:57:00", "open": 31.2728, "high": 31.3153, "low": 31.264, "close": 31.3097, "volume": 887595.0}, {"time": "2020-01-07 18:58:00", "open": 31.3096, "high": 31.314, "low": 31.2373, "close": 31.2527, "volume": 718650.0}, {"time": "2020-01-07 18:59:00", "open": 31.2447, "high": 31.2833, "low": 31.2447, "close": 31.2831, "volume": 569370.0}, {"time": "2020-01-07 19:00:00", "open": 31.286, "high": 31.3027, "low": 31.274, "close": 31.2865, "volume": 512385.0}, {"time": "2020-01-07 19:01:00", "open": 31.29, "high": 31.328, "low": 31.29, "close": 31.316, "volume": 1067070.0}, {"time": "2020-01-07 19:02:00", "open": 31.3136, "high": 31.3207, "low": 31.3, "close": 31.308, "volume": 421485.0}, {"time": "2020-01-07 19:03:00", "open": 31.3113, "high": 31.3137, "low": 31.2767, "close": 31.2953, "volume": 475815.0}, {"time": "2020-01-07 19:04:00", "open": 31.2912, "high": 31.3066, "low": 31.2873, "close": 31.3003, "volume": 338220.0}, {"time": "2020-01-07 19:05:00", "open": 31.3022, "high": 31.35, "low": 31.3008, "close": 31.3425, "volume": 1554885.0}, {"time": "2020-01-07 19:06:00", "open": 31.3428, "high": 31.406, "low": 31.3393, "close": 31.385, "volume": 1653345.0}, {"time": "2020-01-07 19:07:00", "open": 31.39, "high": 31.4, "low": 31.3527, "close": 31.3757, "volume": 1044060.0}, {"time": "2020-01-07 19:08:00", "open": 31.373, "high": 31.4, "low": 31.3607, "close": 31.3647, "volume": 846165.0}, {"time": "2020-01-07 19:09:00", "open": 31.3687, "high": 31.398, "low": 31.3507, "close": 31.3928, "volume": 585075.0}, {"time": "2020-01-07 19:10:00", "open": 31.3887, "high": 31.3899, "low": 31.3067, "close": 31.3235, "volume": 984570.0}, {"time": "2020-01-07 19:11:00", "open": 31.3273, "high": 31.3607, "low": 31.3187, "close": 31.3514, "volume": 548295.0}, {"time": "2020-01-07 19:12:00", "open": 31.3533, "high": 31.3708, "low": 31.3333, "close": 31.3487, "volume": 563625.0}, {"time": "2020-01-07 19:13:00", "open": 31.3393, "high": 31.358, "low": 31.288, "close": 31.298, "volume": 675795.0}, {"time": "2020-01-07 19:14:00", "open": 31.288, "high": 31.3087, "low": 31.246, "close": 31.2561, "volume": 1163055.0}, {"time": "2020-01-07 19:15:00", "open": 31.2653, "high": 31.2705, "low": 31.2146, "close": 31.2367, "volume": 709725.0}, {"time": "2020-01-07 19:16:00", "open": 31.2367, "high": 31.2373, "low": 31.1895, "close": 31.1895, "volume": 835470.0}, {"time": "2020-01-07 19:17:00", "open": 31.1867, "high": 31.232, "low": 31.1613, "close": 31.2307, "volume": 2471940.0}, {"time": "2020-01-07 19:18:00", "open": 31.222, "high": 31.2333, "low": 31.1847, "close": 31.2174, "volume": 622920.0}, {"time": "2020-01-07 19:19:00", "open": 31.2252, "high": 31.2693, "low": 31.2206, "close": 31.2643, "volume": 636420.0}, {"time": "2020-01-07 19:20:00", "open": 31.2644, "high": 31.2707, "low": 31.2221, "close": 31.2291, "volume": 355695.0}, {"time": "2020-01-07 19:21:00", "open": 31.2313, "high": 31.2766, "low": 31.2313, "close": 31.2333, "volume": 385395.0}, {"time": "2020-01-07 19:22:00", "open": 31.2333, "high": 31.2653, "low": 31.224, "close": 31.2367, "volume": 370785.0}, {"time": "2020-01-07 19:23:00", "open": 31.2313, "high": 31.2987, "low": 31.2313, "close": 31.29, "volume": 431340.0}, {"time": "2020-01-07 19:24:00", "open": 31.2837, "high": 31.2967, "low": 31.25, "close": 31.2539, "volume": 476730.0}, {"time": "2020-01-07 19:25:00", "open": 31.2573, "high": 31.2873, "low": 31.2545, "close": 31.2837, "volume": 264000.0}, {"time": "2020-01-07 19:26:00", "open": 31.2837, "high": 31.3427, "low": 31.2833, "close": 31.3245, "volume": 988845.0}, {"time": "2020-01-07 19:27:00", "open": 31.3229, "high": 31.3687, "low": 31.3229, "close": 31.36, "volume": 746865.0}, {"time": "2020-01-07 19:28:00", "open": 31.3572, "high": 31.3713, "low": 31.3073, "close": 31.3303, "volume": 555810.0}, {"time": "2020-01-07 19:29:00", "open": 31.3308, "high": 31.3313, "low": 31.2893, "close": 31.2973, "volume": 403170.0}, {"time": "2020-01-07 19:30:00", "open": 31.2917, "high": 31.3425, "low": 31.2813, "close": 31.3367, "volume": 300570.0}, {"time": "2020-01-07 19:31:00", "open": 31.3393, "high": 31.3493, "low": 31.3173, "close": 31.3255, "volume": 376725.0}, {"time": "2020-01-07 19:32:00", "open": 31.3213, "high": 31.3237, "low": 31.2973, "close": 31.312, "volume": 237255.0}, {"time": "2020-01-07 19:33:00", "open": 31.312, "high": 31.3223, "low": 31.2973, "close": 31.3128, "volume": 246690.0}, {"time": "2020-01-07 19:34:00", "open": 31.31, "high": 31.3287, "low": 31.308, "close": 31.325, "volume": 250290.0}, {"time": "2020-01-07 19:35:00", "open": 31.3247, "high": 31.3247, "low": 31.3, "close": 31.308, "volume": 297150.0}, {"time": "2020-01-07 19:36:00", "open": 31.3093, "high": 31.3573, "low": 31.3092, "close": 31.35, "volume": 487710.0}, {"time": "2020-01-07 19:37:00", "open": 31.3499, "high": 31.3563, "low": 31.2813, "close": 31.2992, "volume": 665880.0}, {"time": "2020-01-07 19:38:00", "open": 31.296, "high": 31.346, "low": 31.29, "close": 31.3377, "volume": 338640.0}, {"time": "2020-01-07 19:39:00", "open": 31.3393, "high": 31.342, "low": 31.2927, "close": 31.294, "volume": 334320.0}, {"time": "2020-01-07 19:40:00", "open": 31.2973, "high": 31.3127, "low": 31.2927, "close": 31.3033, "volume": 254130.0}, {"time": "2020-01-07 19:41:00", "open": 31.3007, "high": 31.3133, "low": 31.2867, "close": 31.3043, "volume": 325590.0}, {"time": "2020-01-07 19:42:00", "open": 31.3052, "high": 31.3167, "low": 31.2911, "close": 31.2911, "volume": 229980.0}, {"time": "2020-01-07 19:43:00", "open": 31.2957, "high": 31.2967, "low": 31.2534, "close": 31.2713, "volume": 444885.0}, {"time": "2020-01-07 19:44:00", "open": 31.274, "high": 31.3158, "low": 31.2703, "close": 31.2872, "volume": 286485.0}, {"time": "2020-01-07 19:45:00", "open": 31.2939, "high": 31.3267, "low": 31.288, "close": 31.32, "volume": 256485.0}, {"time": "2020-01-07 19:46:00", "open": 31.3183, "high": 31.3233, "low": 31.2967, "close": 31.3091, "volume": 277830.0}, {"time": "2020-01-07 19:47:00", "open": 31.3044, "high": 31.352, "low": 31.302, "close": 31.3503, "volume": 788310.0}, {"time": "2020-01-07 19:48:00", "open": 31.352, "high": 31.3633, "low": 31.334, "close": 31.3387, "volume": 654795.0}, {"time": "2020-01-07 19:49:00", "open": 31.3425, "high": 31.3547, "low": 31.324, "close": 31.338, "volume": 310695.0}, {"time": "2020-01-07 19:50:00", "open": 31.338, "high": 31.3464, "low": 31.32, "close": 31.3373, "volume": 262725.0}, {"time": "2020-01-07 19:51:00", "open": 31.3333, "high": 31.3433, "low": 31.3069, "close": 31.319, "volume": 238920.0}, {"time": "2020-01-07 19:52:00", "open": 31.3186, "high": 31.34, "low": 31.318, "close": 31.3347, "volume": 242100.0}, {"time": "2020-01-07 19:53:00", "open": 31.3276, "high": 31.33, "low": 31.3067, "close": 31.324, "volume": 225330.0}, {"time": "2020-01-07 19:54:00", "open": 31.3173, "high": 31.3313, "low": 31.3143, "close": 31.3293, "volume": 102435.0}, {"time": "2020-01-07 19:55:00", "open": 31.3265, "high": 31.3467, "low": 31.326, "close": 31.3453, "volume": 320385.0}, {"time": "2020-01-07 19:56:00", "open": 31.3438, "high": 31.3567, "low": 31.3253, "close": 31.3275, "volume": 450450.0}, {"time": "2020-01-07 19:57:00", "open": 31.3253, "high": 31.368, "low": 31.3247, "close": 31.368, "volume": 732840.0}, {"time": "2020-01-07 19:58:00", "open": 31.3713, "high": 31.4213, "low": 31.366, "close": 31.3882, "volume": 1390500.0}, {"time": "2020-01-07 19:59:00", "open": 31.3993, "high": 31.4007, "low": 31.3802, "close": 31.3867, "volume": 455415.0}, {"time": "2020-01-07 20:00:00", "open": 31.3913, "high": 31.3913, "low": 31.3433, "close": 31.3716, "volume": 561285.0}, {"time": "2020-01-07 20:01:00", "open": 31.3664, "high": 31.3827, "low": 31.3514, "close": 31.3793, "volume": 252195.0}, {"time": "2020-01-07 20:02:00", "open": 31.3747, "high": 31.418, "low": 31.37, "close": 31.3948, "volume": 768150.0}, {"time": "2020-01-07 20:03:00", "open": 31.4, "high": 31.4, "low": 31.37, "close": 31.3713, "volume": 421965.0}, {"time": "2020-01-07 20:04:00", "open": 31.3733, "high": 31.3873, "low": 31.352, "close": 31.3822, "volume": 381615.0}, {"time": "2020-01-07 20:05:00", "open": 31.3796, "high": 31.38, "low": 31.362, "close": 31.3778, "volume": 309720.0}, {"time": "2020-01-07 20:06:00", "open": 31.3778, "high": 31.3778, "low": 31.344, "close": 31.3548, "volume": 377355.0}, {"time": "2020-01-07 20:07:00", "open": 31.35, "high": 31.3807, "low": 31.35, "close": 31.36, "volume": 295050.0}, {"time": "2020-01-07 20:08:00", "open": 31.3607, "high": 31.3753, "low": 31.3413, "close": 31.3441, "volume": 297015.0}, {"time": "2020-01-07 20:09:00", "open": 31.342, "high": 31.3667, "low": 31.3387, "close": 31.3556, "volume": 432765.0}, {"time": "2020-01-07 20:10:00", "open": 31.3553, "high": 31.3813, "low": 31.3553, "close": 31.3747, "volume": 244320.0}, {"time": "2020-01-07 20:11:00", "open": 31.3779, "high": 31.3833, "low": 31.3647, "close": 31.378, "volume": 287145.0}, {"time": "2020-01-07 20:12:00", "open": 31.3773, "high": 31.3813, "low": 31.348, "close": 31.3532, "volume": 302715.0}, {"time": "2020-01-07 20:13:00", "open": 31.3507, "high": 31.3927, "low": 31.3477, "close": 31.3855, "volume": 467385.0}, {"time": "2020-01-07 20:14:00", "open": 31.3903, "high": 31.412, "low": 31.3687, "close": 31.3833, "volume": 429975.0}, {"time": "2020-01-07 20:15:00", "open": 31.3853, "high": 31.3866, "low": 31.3587, "close": 31.38, "volume": 779160.0}, {"time": "2020-01-07 20:16:00", "open": 31.3793, "high": 31.39, "low": 31.3701, "close": 31.3743, "volume": 250725.0}, {"time": "2020-01-07 20:17:00", "open": 31.3753, "high": 31.38, "low": 31.36, "close": 31.3623, "volume": 270345.0}, {"time": "2020-01-07 20:18:00", "open": 31.36, "high": 31.3787, "low": 31.3467, "close": 31.373, "volume": 655170.0}, {"time": "2020-01-07 20:19:00", "open": 31.3733, "high": 31.3933, "low": 31.3626, "close": 31.3816, "volume": 376815.0}, {"time": "2020-01-07 20:20:00", "open": 31.3847, "high": 31.408, "low": 31.376, "close": 31.4053, "volume": 668805.0}, {"time": "2020-01-07 20:21:00", "open": 31.406, "high": 31.4133, "low": 31.3947, "close": 31.4018, "volume": 626310.0}];
    const markersData = [{"time": "2020-01-07 16:31:00", "position": "aboveBar", "color": "#2196F3", "shape": "arrowDown", "text": "Pole Start\\n16:31"}, {"time": "2020-01-07 18:18:00", "position": "belowBar", "color": "#FF9800", "shape": "arrowUp", "text": "Pole End\\n107.0min\\n18:18"}, {"time": "2020-01-07 18:34:00", "position": "aboveBar", "color": "#9C27B0", "shape": "square", "text": "Convergence End\\n18:34"}, {"time": "2020-01-07 19:01:00", "position": "aboveBar", "color": "#4CAF50", "shape": "circle", "text": "End of Flagpole\\n\\n19:01"}, {"time": "2020-01-07 19:21:00", "position": "aboveBar", "color": "#F44336", "shape": "diamond", "text": "Analysis End\\n0.00%\\n19:21"}];
    const timingInfo = {"start": "2020-01-07 16:31:00", "end": "2020-01-07 19:01:00", "analysisEnd": "2020-01-07 19:21:00"};
    const forwardTestData = null;
    
    // Helper functions
    const dateToTimestamp = (dateStr) => {
        const [datePart, timePart] = dateStr.split(' ');
        const [year, month, day] = datePart.split('-').map(Number);
        const [hour, minute, second] = timePart.split(':').map(Number);
        const utcDate = new Date(Date.UTC(year, month - 1, day, hour, minute, second));
        return Math.floor(utcDate.getTime() / 1000);
    };
    
    const formatTime = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const hours = String(date.getUTCHours()).padStart(2, '0');
        const minutes = String(date.getUTCMinutes()).padStart(2, '0');
        return `${hours}:${minutes}`;
    };
    
    const formatDate = (timestamp) => {
        const date = new Date(timestamp * 1000);
        const year = date.getUTCFullYear();
        const month = String(date.getUTCMonth() + 1).padStart(2, '0');
        const day = String(date.getUTCDate()).padStart(2, '0');
        return `${year}-${month}-${day}`;
    };
    
    // Wait for DOM and library
    const initChart = () => {
        const chartElement = document.getElementById('chart');
        
        if (!chartElement) {
            console.error('Chart element not found');
            return;
        }
        
        if (typeof window.LightweightCharts === 'undefined') {
            console.error('LightweightCharts library not loaded');
            chartElement.innerHTML = '<p style="color: red; padding: 20px;">Error: Chart library not loaded. Please refresh the page.</p>';
            return;
        }
        
        // Create chart with proper sizing
        const containerWidth = chartElement.offsetWidth || 800;
        chartOptions.width = containerWidth;
        
        // Height is already properly configured by chart layout system
        // No need to override here
        
        const chart = window.LightweightCharts.createChart(chartElement, chartOptions);
        
        // Custom time formatting for axis
        chart.applyOptions({
            timeScale: {
                tickMarkFormatter: (time, tickMarkType) => {
                    const date = new Date(time * 1000);
                    
                    // Different formats based on zoom level
                    switch(tickMarkType) {
                        case 0: // Year
                            return date.getUTCFullYear().toString();
                        case 1: // Month
                            return formatDate(time).substring(0, 7);
                        case 2: // Day
                            return formatDate(time).substring(5);
                        default: // Time
                            return formatTime(time);
                    }
                },
            },
            localization: {
                timeFormatter: (timestamp) => {
                    return `${formatDate(timestamp)} ${formatTime(timestamp)} UTC`;
                },
            },
        });
        
        // Create candlestick series
        const candlestickSeries = chart.addCandlestickSeries({"upColor": "#26a69a", "downColor": "#ef5350", "borderVisible": false, "wickUpColor": "#26a69a", "wickDownColor": "#ef5350", "wickVisible": true});
        
        // Set data
        const formattedData = candlestickData.map(d => ({
            time: dateToTimestamp(d.time),
            open: d.open,
            high: d.high,
            low: d.low,
            close: d.close,
        }));
        
        candlestickSeries.setData(formattedData);
        
        // Add markers
        if (markersData.length > 0) {
            const formattedMarkers = markersData.map(m => ({
                time: dateToTimestamp(m.time),
                position: m.position,
                color: m.color,
                shape: m.shape,
                text: m.text,
            }));
            
            candlestickSeries.setMarkers(formattedMarkers);
        }
        
        // Add flagpole zone
        
        // Create flagpole zone
        if (timingInfo.start && timingInfo.end) {
            const flagpoleAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(76, 175, 80, 0.2)',
                bottomColor: 'rgba(76, 175, 80, 0.05)',
                lineColor: 'rgba(76, 175, 80, 0.5)',
                lineWidth: 2,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for flagpole period
            const startTime = dateToTimestamp(timingInfo.start);
            const endTime = dateToTimestamp(timingInfo.end);
            const flagpoleData = formattedData.filter(d => d.time >= startTime && d.time <= endTime);
            
            if (flagpoleData.length > 0) {
                const maxPrice = Math.max(...flagpoleData.map(d => d.high));
                const areaData = flagpoleData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                flagpoleAreaSeries.setData(areaData);
            }
        }
        
        // Create analysis window zone
        if (timingInfo.analysisEnd) {
            const analysisAreaSeries = chart.addAreaSeries({
                topColor: 'rgba(33, 150, 243, 0.1)',
                bottomColor: 'rgba(33, 150, 243, 0.0)',
                lineColor: 'rgba(33, 150, 243, 0.3)',
                lineWidth: 1,
                crosshairMarkerVisible: false,
                priceLineVisible: false,
            });
            
            // Get data for analysis period
            const endTime = dateToTimestamp(timingInfo.end);
            const analysisEndTime = dateToTimestamp(timingInfo.analysisEnd);
            const analysisData = formattedData.filter(d => d.time >= endTime && d.time <= analysisEndTime);
            
            if (analysisData.length > 0) {
                const maxPrice = Math.max(...analysisData.map(d => d.high));
                const areaData = analysisData.map(d => ({
                    time: d.time,
                    value: maxPrice * 1.02,
                }));
                analysisAreaSeries.setData(areaData);
            }
        }
        
        
        // Add legend if forward test data available
        
        // Create legend for forward test data
        if (forwardTestData) {
            const legend = document.createElement('div');
            legend.style.cssText = `
            position: absolute;
            left: 12px;
            top: 12px;
            background: rgba(255, 255, 255, 0.9);
            padding: 12px;
            border-radius: 6px;
            font-size: 14px;
            z-index: 1000;
            box-shadow: 0 2px 8px rgba(0,0,0,0.1);
        `;
            
            const isProfitable = forwardTestData.forwardReturn > 0;
            const signalColor = forwardTestData.signalType === 'BUY' ? 
                '#4CAF50' : '#F44336';
            const returnColor = isProfitable ? 
                '#4CAF50' : '#F44336';
            
            legend.innerHTML = `
                <div style="font-weight: bold; margin-bottom: 6px; color: #333;">Forward Test Results</div>
                <div style="margin-bottom: 4px;">Signal: <span style="color: ${signalColor};font-weight:bold;">${forwardTestData.signalType}</span></div>
                <div style="margin-bottom: 4px;">Entry: <span style="font-weight:bold;">$${forwardTestData.entryPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Exit: <span style="font-weight:bold;">$${forwardTestData.exitPrice.toFixed(2)}</span></div>
                <div style="margin-bottom: 4px;">Return: <span style="color: ${returnColor};font-weight:bold;">${(forwardTestData.forwardReturn * 100).toFixed(2)}%</span></div>
                <div>Window: <span style="font-weight:bold;">${forwardTestData.analysisWindow} minutes</span></div>
            `;
            
            chartElement.appendChild(legend);
        }
        
        
        // Handle window resize
        const handleResize = () => {
            const newWidth = chartElement.offsetWidth || 800;
            chart.applyOptions({ width: newWidth });
        };
        
        window.addEventListener('resize', handleResize);
        
        // Fit content and ensure time axis is visible
        chart.timeScale().fitContent();
        
        // Force time scale visibility
        chart.timeScale().applyOptions({
            visible: true,
            borderVisible: true,
            ticksVisible: true,
        });
        
        // Store chart instance for debugging
        window.chartInstance = chart;
        
        console.log('Chart initialized successfully');
    };
    
    // Initialize when DOM is ready
    if (document.readyState === 'loading') {
        document.addEventListener('DOMContentLoaded', initChart);
    } else {
        initChart();
    }
})();
</script>

        </div>
    </div>
</body>
</html>